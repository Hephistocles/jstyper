% generated by Ott 0.25 from: src/formal/jstyper.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{termvar} ,\, \ottmv{x} ,\, \ottmv{y} ,\, \ottmv{z} ,\, \ottmv{id} ,\, \ottmv{l} ,\, \ottmv{this} ,\, \ottmv{return} $ &  \\
 $ \ottmv{index} ,\, \ottmv{i} ,\, \ottmv{j} ,\, \ottmv{k} $ &  \\
}}

\newcommand{\ottv}{
\ottrulehead{\ottnt{v}}{::=}{\ottcom{Values}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{b}}{}{}{}{\ottcom{Boolean}}\ottprodnewline
\ottprodline{|}{\ottnt{n}}{}{}{}{\ottcom{Number}}\ottprodnewline
\ottprodline{|}{\ottkw{str}}{}{}{}{\ottcom{String}}\ottprodnewline
\ottprodline{|}{\ottkw{undefined}}{}{}{}{\ottcom{Undefined}}\ottprodnewline
\ottprodline{|}{\ottkw{null}}{}{}{}{\ottcom{null}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{i}}}  \ottsym{:}  \ottnt{v_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{ObjVal}}\ottprodnewline
\ottprodline{|}{\ottnt{func}}{}{}{}{\ottcom{FuncVal}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{{\mathrm{2}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrayVal}}\ottprodnewline
\ottprodline{|}{\ottsym{get(}  \ottnt{s}  \ottsym{,}  \ottmv{id}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{GetStore}}}

\newcommand{\ottfunc}{
\ottrulehead{\ottnt{func}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}}{}{}{}{\ottcom{FuncVal}}\ottprodnewline
\ottprodline{|}{\ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}}{}{}{}{\ottcom{AnonFuncVal}}}

\newcommand{\otts}{
\ottrulehead{\ottnt{s}}{::=}{\ottcom{Store}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{id_{\ottmv{i}}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{k}}}  \ottsym{]}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{PutStore}}\ottprodnewline
\ottprodline{|}{\ottsym{del(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{id_{\ottmv{i}}}  \ottsym{]}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{DelStore}}}

\newcommand{\ottvd}{
\ottrulehead{\ottnt{vd}}{::=}{\ottcom{VariableDeclaration}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{id}}{}{}{}{\ottcom{Declaration}}\ottprodnewline
\ottprodline{|}{\ottmv{id}  \ottsym{=}  \ottnt{e}}{}{}{}{\ottcom{Definition}}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{Expression}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{v}}{}{}{}{\ottcom{Value}}\ottprodnewline
\ottprodline{|}{\ottmv{id}}{}{}{}{\ottcom{Deref}}\ottprodnewline
\ottprodline{|}{\ottmv{id} \, \approx \, \ottnt{e}}{}{}{}{\ottcom{Assign}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{.}  \ottmv{l} \, \approx \, \ottnt{e'}}{}{}{}{\ottcom{PropAssign}}\ottprodnewline
\ottprodline{|}{\ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}  \approx \, \ottnt{e}}{}{}{}{\ottcom{ArrayAssign}}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{op} \, \ottnt{e'}}{}{}{}{\ottcom{BinExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{postOp}}{}{}{}{\ottcom{PostExp}}\ottprodnewline
\ottprodline{|}{\ottnt{preOp} \, \ottnt{e}}{}{}{}{\ottcom{PreExp}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{i}}}  \ottsym{:}  \ottnt{e_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{ObjExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{.}  \ottmv{l}}{}{}{}{\ottcom{PropExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}}{}{}{}{\ottcom{CallExp}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrayExp}}}

\newcommand{\ottAss}{
\ottrulehead{\approx}{::=}{\ottcom{Assignments}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{=}}{}{}{}{\ottcom{PlainAssign}}\ottprodnewline
\ottprodline{|}{\ottnt{numOp}  \ottsym{=}}{}{}{}{\ottcom{NumAssign}}}

\newcommand{\ottvarDec}{
\ottrulehead{\ottnt{varDec}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{var} \, \ottnt{vd_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{vd_{\ottmv{k}}}}{}{}{}{\ottcom{VarDeclaration}}}

\newcommand{\ottm}{
\ottrulehead{\ottnt{m}}{::=}{\ottcom{Statement}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{e}}{}{}{}{\ottcom{Expression}}\ottprodnewline
\ottprodline{|}{\ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}}}{}{}{}{\ottcom{Seqs}}\ottprodnewline
\ottprodline{|}{\ottnt{varDec}}{}{}{}{\ottcom{VarDeclaration}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{IfStatement}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}}}{}{}{}{\ottcom{IfElseStatement}}\ottprodnewline
\ottprodline{|}{\ottmv{return} \, \ottnt{e}}{}{}{}{\ottcom{ReturnStatement}}\ottprodnewline
\ottprodline{|}{\ottmv{return}}{}{}{}{\ottcom{Return}}\ottprodnewline
\ottprodline{|}{\ottsym{@def} \, \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}}{}{}{}{\ottcom{FuncDef}}\ottprodnewline
\ottprodline{|}{\ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{WhileStatement}}\ottprodnewline
\ottprodline{|}{\ottkw{for} \, \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{ForStatement1}}\ottprodnewline
\ottprodline{|}{\ottkw{for} \, \ottsym{(}  \ottnt{varDec}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{ForStatement2}}\ottprodnewline
\ottprodline{|}{ \epsilon }{}{}{}{\ottcom{EmptyStatement}}}

\newcommand{\ottret}{
\ottrulehead{\ottnt{ret}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{return} \, \ottnt{e}}{}{}{}{\ottcom{ReturnExp}}\ottprodnewline
\ottprodline{|}{\ottmv{return}}{}{}{}{\ottcom{Return}}}

\newcommand{\ottop}{
\ottrulehead{\ottnt{op}}{::=}{\ottcom{BinaryOperation}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{numOp}}{}{}{}{\ottcom{NumOp}}\ottprodnewline
\ottprodline{|}{\ottnt{cmpOp}}{}{}{}{\ottcom{CmpOp}}\ottprodnewline
\ottprodline{|}{\ottnt{numcmpOp}}{}{}{}{\ottcom{NumCmpOp}}\ottprodnewline
\ottprodline{|}{\ottnt{boolOp}}{}{}{}{\ottcom{BoolOp}}}

\newcommand{\ottnumOp}{
\ottrulehead{\ottnt{numOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{+}}{}{}{}{\ottcom{Addition}}\ottprodnewline
\ottprodline{|}{\ottsym{-}}{}{}{}{\ottcom{Subtraction}}\ottprodnewline
\ottprodline{|}{\ottsym{/}}{}{}{}{\ottcom{Division}}\ottprodnewline
\ottprodline{|}{\ottsym{*}}{}{}{}{\ottcom{Multiplication}}\ottprodnewline
\ottprodline{|}{\ottsym{\%}}{}{}{}{\ottcom{Modulo}}}

\newcommand{\ottnumcmpOp}{
\ottrulehead{\ottnt{numcmpOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{<}}{}{}{}{\ottcom{LessThan}}\ottprodnewline
\ottprodline{|}{\ottsym{>}}{}{}{}{\ottcom{GreaterThan}}\ottprodnewline
\ottprodline{|}{ \leq }{}{}{}{\ottcom{LessEqual}}\ottprodnewline
\ottprodline{|}{ \geq }{}{}{}{\ottcom{GreaterEqual}}}

\newcommand{\ottcmpOp}{
\ottrulehead{\ottnt{cmpOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{==}}{}{}{}{\ottcom{Equal}}\ottprodnewline
\ottprodline{|}{ !\!\!= }{}{}{}{\ottcom{Unequal}}\ottprodnewline
\ottprodline{|}{\ottsym{===}}{}{}{}{\ottcom{StrictEqual}}\ottprodnewline
\ottprodline{|}{ !\!\!== }{}{}{}{\ottcom{StrictUnequal}}}

\newcommand{\ottboolOp}{
\ottrulehead{\ottnt{boolOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{\mbox{$\mid$}\mbox{$\mid$}}}{}{}{}{\ottcom{BooleanOr}}\ottprodnewline
\ottprodline{|}{\ottsym{\&\&}}{}{}{}{\ottcom{BooleanAnd}}}

\newcommand{\ottpreOp}{
\ottrulehead{\ottnt{preOp}}{::=}{\ottcom{PrefixOperation}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{preNum}}{}{}{}{\ottcom{PreNum}}\ottprodnewline
\ottprodline{|}{ !\! }{}{}{}{\ottcom{BoolNegation}}}

\newcommand{\ottpreNum}{
\ottrulehead{\ottnt{preNum}}{::=}{\ottcom{PreNum}}\ottprodnewline
\ottfirstprodline{|}{ -\! }{}{}{}{\ottcom{Negation}}\ottprodnewline
\ottprodline{|}{ -\!\!-\!\! }{}{}{}{\ottcom{PreDecrement}}\ottprodnewline
\ottprodline{|}{ +\!\!+\!\! }{}{}{}{\ottcom{PreIncrement}}}

\newcommand{\ottpostOp}{
\ottrulehead{\ottnt{postOp}}{::=}{\ottcom{PostfixOperation}}\ottprodnewline
\ottfirstprodline{|}{ \!\!\!-\!\!- }{}{}{}{\ottcom{PostDecrement}}\ottprodnewline
\ottprodline{|}{ \!\!+\!\!+ }{}{}{}{\ottcom{PostIncrement}}}

\newcommand{\ottb}{
\ottrulehead{\ottnt{b}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{true}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{}}

\newcommand{\ottT}{
\ottrulehead{\ottnt{T}}{::=}{\ottcom{Value Type}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{number}}{}{}{}{\ottcom{Number}}\ottprodnewline
\ottprodline{|}{\ottkw{boolean}}{}{}{}{\ottcom{Boolean}}\ottprodnewline
\ottprodline{|}{\ottkw{string}}{}{}{}{\ottcom{String}}\ottprodnewline
\ottprodline{|}{\ottkw{undefined}}{}{}{}{\ottcom{undefined}}\ottprodnewline
\ottprodline{|}{\ottkw{null}}{}{}{}{\ottcom{null}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{ObjType}}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T_{\ottmv{j}}}  \ottsym{)}}{}{}{}{\ottcom{FunType}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrayType}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{["return"]}}{}{}{}{\ottcom{GammaType}}\ottprodnewline
\ottprodline{|}{\ottkw{IllDefined} \, \ottsym{(}  \ottnt{T}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{IllDefinedType}}\ottprodnewline
\ottprodline{|}{\ottkw{pending}} {\textsf{M}}{}{}{\ottcom{Pending}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \Rightarrow  \ottnt{T_{{\mathrm{2}}}}}{}{}{}{\ottcom{DerivedType}}}

\newcommand{\ottG}{
\ottrulehead{\Gamma}{::=}{\ottcom{Context}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{\ottcom{EmptyContext}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \Gamma  \ottsym{\}}}{}{}{}{\ottcom{SingletonContext}}\ottprodnewline
\ottprodline{|}{ \Gamma  \cup  \Gamma' }{}{}{}{\ottcom{UnionContext}}\ottprodnewline
\ottprodline{|}{\ottmv{id}  \ottsym{:}  \ottnt{T}}{}{}{}{\ottcom{ContextItem}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{id_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{id_{\ottmv{k}}}  \ottsym{:}  \ottnt{T_{\ottmv{k}}}  \ottsym{\}}}{}{}{}{\ottcom{ContextItems}}}

\newcommand{\ottC}{
\ottrulehead{\ottnt{C}}{::=}{\ottcom{Constraint}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{\ottcom{EmptyConstraint}}\ottprodnewline
\ottprodline{|}{ \ottnt{C}  \cup  \ottnt{C'} }{}{}{}{\ottcom{UnionConstraint}}\ottprodnewline
\ottprodline{|}{ \ottnt{C}  \cap  \ottnt{C'} }{}{}{}{\ottcom{IntersectConstraint}}\ottprodnewline
\ottprodline{|}{ \bigcup \limits_{ \ottnt{setIndex} = \ottnt{n_{{\mathrm{1}}}} }^ \ottnt{n_{{\mathrm{2}}}}   \ottnt{C} }{}{}{}{\ottcom{BigUnion}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \, \ottnt{const} \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}}{}{}{}{\ottcom{ConstLeq}}\ottprodnewline
\ottprodline{|}{ \ottnt{C} }{}{}{}{\ottcom{BracketedConstraint}}}

\newcommand{\ottconst}{
\ottrulehead{\ottnt{const}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \preceq }{}{}{}{\ottcom{LEqConstraint}}\ottprodnewline
\ottprodline{|}{ \succeq }{}{}{}{\ottcom{GEqConstraint}}\ottprodnewline
\ottprodline{|}{ \preceq_c }{}{}{}{\ottcom{LEqCheckConstraint}}\ottprodnewline
\ottprodline{|}{ \succeq_c }{}{}{}{\ottcom{GEqCheckConstraint}}\ottprodnewline
\ottprodline{|}{ \preceq_o }{}{}{}{\ottcom{LEqOptConstraint}}\ottprodnewline
\ottprodline{|}{ \succeq_o }{}{}{}{\ottcom{GEqOptConstraint}}\ottprodnewline
\ottprodline{|}{ = }{}{}{}{\ottcom{EqConstraint}}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{;}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{var}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \varnothing }{}{}{}{}}

\newcommand{\ottsv}{
\ottrulehead{\ottnt{sv}}{::=}{\ottcom{SetVar}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{C}}{}{}{}{\ottcom{ConstraintSet}}\ottprodnewline
\ottprodline{|}{\ottkw{X}}{}{}{}{\ottcom{VariableSet}}\ottprodnewline
\ottprodline{|}{\ottsym{dom(}  \Gamma  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{codom(}  \Gamma  \ottsym{)}}{}{}{}{}}

\newcommand{\ottfv}{
\ottrulehead{\ottnt{fv}}{::=}{\ottcom{FormulaVar}}\ottprodnewline
\ottfirstprodline{|}{\Gamma}{}{}{}{\ottcom{ContextVar}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{(}  \ottmv{id}  \ottsym{)}}{}{}{}{\ottcom{ContextMember}}\ottprodnewline
\ottprodline{|}{\ottnt{sv}}{}{}{}{\ottcom{SetFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{T}}{}{}{}{\ottcom{TypeFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottmv{id}}{}{}{}{\ottcom{IllDefinedFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{func}}{}{}{}{\ottcom{FuncFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{\ottcom{ExpFormulaVar}}}

\newcommand{\ottn}{
\ottrulehead{\ottnt{n}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{0}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{1}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{2}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{3}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{setIndex}}{}{}{}{}}

\newcommand{\ottsetIndex}{
\ottrulehead{\ottnt{setIndex}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{i}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{k}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{j}}{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{\ottcom{judgement}}\ottprodnewline
\ottprodline{|}{ \neg  \ottnt{formula} }{}{}{}{\ottcom{not}}\ottprodnewline
\ottprodline{|}{ ( \ottnt{formula} \!) }{}{}{}{\ottcom{brackets}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula} }{}{}{}{\ottcom{bracketsHidden}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula_{{\mathrm{1}}}}  \hdots  \ottnt{formula_{\ottmv{k}}} }{}{}{}{\ottcom{listForm}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \vee  \ottsym{formula’} }{}{}{}{\ottcom{or}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \wedge  \ottsym{formula’} }{}{}{}{\ottcom{and}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \hspace{1pc}\textit{for}\hspace{6pt}  \ottnt{formula'} }{}{}{}{\ottcom{condform}}\ottprodnewline
\ottprodline{|}{ \forall  \ottnt{setIndex} \ottnt{formula} }{}{}{}{\ottcom{ForAll}}\ottprodnewline
\ottprodline{|}{ \forall  \ottnt{setIndex} \in \ottnt{sv} \ottnt{formula} }{}{}{}{\ottcom{ForAllIn}}\ottprodnewline
\ottprodline{|}{\ottnt{fv}  \ottsym{=}  \ottnt{fv_{{\mathrm{2}}}}}{}{}{}{\ottcom{fequal}}\ottprodnewline
\ottprodline{|}{ \ottnt{fv}  \neq  \ottnt{fv_{{\mathrm{2}}}} }{}{}{}{\ottcom{fnotequal}}\ottprodnewline
\ottprodline{|}{ \ottnt{fv}  \in  \ottnt{sv_{{\mathrm{2}}}} }{}{}{}{\ottcom{Contains}}\ottprodnewline
\ottprodline{|}{ \ottnt{fv}  \notin  \ottnt{sv_{{\mathrm{2}}}} }{}{}{}{\ottcom{NotContains}}\ottprodnewline
\ottprodline{|}{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}{}{}{}{\ottcom{Fresh}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}{}{}{}{\ottcom{Freshs}}}

\newcommand{\ottJop}{
\ottrulehead{\ottnt{Jop}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \langle  \ottnt{m} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m'} ,  \ottnt{s'}  \rangle }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{}{}{}{}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{Jop}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{termvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{func}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{vd}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\approx}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{varDec}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{m}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{numOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{numcmpOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{cmpOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{boolOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{preOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{preNum}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{postOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{b}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{T}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{C}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{const}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{fv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{setIndex}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottv\ottinterrule
\ottfunc\ottinterrule
\otts\ottinterrule
\ottvd\ottinterrule
\otte\ottinterrule
\ottAss\ottinterrule
\ottvarDec\ottinterrule
\ottm\ottinterrule
\ottret\ottinterrule
\ottop\ottinterrule
\ottnumOp\ottinterrule
\ottnumcmpOp\ottinterrule
\ottcmpOp\ottinterrule
\ottboolOp\ottinterrule
\ottpreOp\ottinterrule
\ottpreNum\ottinterrule
\ottpostOp\ottinterrule
\ottb\ottinterrule
\ottT\ottinterrule
\ottG\ottinterrule
\ottC\ottinterrule
\ottconst\ottinterrule
\ottterminals\ottinterrule
\ottsv\ottinterrule
\ottfv\ottinterrule
\ottn\ottinterrule
\ottsetIndex\ottinterrule
\ottformula\ottinterrule
\ottJop\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns Jop
%% defn reduce
\newcommand{\ottdruleSeqOne}[1]{\ottdrule[#1]{%
}{
 \langle  \ottnt{v}  \ottsym{;}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{Seq1}}{}%
}}


\newcommand{\ottdruleSeqTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{m_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m'_{{\mathrm{1}}}} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m'_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Seq2}}{}%
}}


\newcommand{\ottdruleAssignOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottmv{id} \, \approx \, \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottmv{id} \, \approx \, \ottnt{e'} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Assign1}}{}%
}}


\newcommand{\ottdruleAssign}[1]{\ottdrule[#1]{%
}{
 \langle  \ottmv{id} \, \ottsym{=} \, \ottnt{v} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{Assign}}{}%
}}


\newcommand{\ottdruleAssignNum}[1]{\ottdrule[#1]{%
}{
 \langle  \ottmv{id} \, \ottnt{numOp}  \ottsym{=} \, \ottnt{v} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottmv{id} \, \ottsym{=} \, \ottmv{id} \, \ottnt{numOp} \, \ottnt{v} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{AssignNum}}{}%
}}


\newcommand{\ottdruleDeref}[1]{\ottdrule[#1]{%
}{
 \langle  \ottmv{id} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottsym{get(}  \ottnt{s}  \ottsym{,}  \ottmv{id}  \ottsym{)} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{Deref}}{}%
}}


\newcommand{\ottdruleVarOne}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{var} \, \ottmv{id} ,  \ottnt{s}  \rangle  \rightarrow  \langle   \epsilon  ,  \ottnt{s}  \rangle }{%
{\ottdrulename{Var1}}{}%
}}


\newcommand{\ottdruleVarTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{e'} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{Var2}}{}%
}}


\newcommand{\ottdruleVarThree}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{v} ,  \ottnt{s}  \rangle  \rightarrow  \langle   \epsilon  ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{Var3}}{}%
}}


\newcommand{\ottdruleVarFour}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{var} \, \ottnt{vd}  \ottsym{,}  \ottnt{vd'} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{var} \, \ottnt{vd}  \ottsym{;}  \ottkw{var} \, \ottnt{vd'} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{Var4}}{}%
}}


\newcommand{\ottdruleFuncDef}[1]{\ottdrule[#1]{%
}{
 \langle  \ottsym{@def} \, \ottkw{function} \, \ottmv{x}  \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{y_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle   \epsilon  ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{x}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottkw{function} \, \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{y_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{FuncDef}}{}%
}}


\newcommand{\ottdruleUnOpOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{preOp} \, \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{preOp} \, \ottnt{e'_{{\mathrm{1}}}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{UnOp1}}{}%
}}


\newcommand{\ottdruleUnOpTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{postOp} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} \, \ottnt{postOp} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{UnOp2}}{}%
}}


\newcommand{\ottdruleBinOpOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{op} \, \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} \, \ottnt{op} \, \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{BinOp1}}{}%
}}


\newcommand{\ottdruleBinOpTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{2}}}} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{v} \, \ottnt{op} \, \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{v} \, \ottnt{op} \, \ottnt{e'_{{\mathrm{2}}}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{BinOp2}}{}%
}}


\newcommand{\ottdruleBinOpThree}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{n_{{\mathrm{1}}}} \, \ottnt{op} \, \ottnt{n_{{\mathrm{2}}}}  \ottsym{=}  \ottnt{n}}%
}{
 \langle  \ottnt{n_{{\mathrm{1}}}} \, \ottnt{op} \, \ottnt{n_{{\mathrm{2}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{n} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{BinOp3}}{}%
}}


\newcommand{\ottdruleBoolNeg}[1]{\ottdrule[#1]{%
\ottpremise{ !\!  \, \ottnt{b_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{b_{{\mathrm{2}}}}}%
}{
 \langle   !\!  \, \ottnt{b_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{b_{{\mathrm{2}}}} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{BoolNeg}}{}%
}}


\newcommand{\ottdruleNumNeg}[1]{\ottdrule[#1]{%
\ottpremise{ -\!  \, \ottnt{n_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{n}}%
}{
 \langle   -\!  \, \ottnt{n_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{n} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{NumNeg}}{}%
}}


\newcommand{\ottdrulePostInc}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{get(}  \ottnt{s}  \ottsym{,}  \ottmv{id}  \ottsym{)} \, \ottsym{+} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle  \ottmv{id} \,  \!\!+\!\!+  ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottmv{id} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{PostInc}}{}%
}}


\newcommand{\ottdrulePreInc}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{get(}  \ottnt{s}  \ottsym{,}  \ottmv{id}  \ottsym{)} \, \ottsym{+} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle   +\!\!+\!\!  \, \ottmv{id} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottmv{id} \, \ottsym{+} \, \ottsym{1} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{PreInc}}{}%
}}


\newcommand{\ottdrulePostDec}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{get(}  \ottnt{s}  \ottsym{,}  \ottmv{id}  \ottsym{)} \, \ottsym{-} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle  \ottmv{id} \,  \!\!\!-\!\!-  ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottmv{id} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{PostDec}}{}%
}}


\newcommand{\ottdrulePreDec}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{get(}  \ottnt{s}  \ottsym{,}  \ottmv{id}  \ottsym{)} \, \ottsym{-} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle   -\!\!-\!\!  \, \ottmv{id} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottmv{id} \, \ottsym{+} \, \ottsym{1} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{PreDec}}{}%
}}


\newcommand{\ottdruleIfOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e'}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{If1}}{}%
}}


\newcommand{\ottdruleIfTwo}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottkw{true}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{If2}}{}%
}}


\newcommand{\ottdruleIfThree}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottkw{false}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m_{{\mathrm{2}}}} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{If3}}{}%
}}


\newcommand{\ottdruleIfFour}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \,  \ottsym{\}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{If4}}{}%
}}


\newcommand{\ottdruleWhile}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}  \ottsym{\}} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{While}}{}%
}}


\newcommand{\ottdruleFor}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{for} \, \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottkw{if} \, \ottsym{(}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{;}  \ottkw{while} \, \ottsym{(}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{\}}  \ottsym{\}} ,  \ottnt{s}  \rangle }{%
{\ottdrulename{For}}{}%
}}


\newcommand{\ottdruleObj}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{j}}}  \ottsym{:}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottmv{l}  \ottsym{:}  \ottnt{e}  \ottsym{,}  \ottmv{l'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l'_{\ottmv{j}}}  \ottsym{:}  \ottnt{e_{\ottmv{j}}}  \ottsym{\}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{j}}}  \ottsym{:}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottmv{l}  \ottsym{:}  \ottnt{e'}  \ottsym{,}  \ottmv{l'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l'_{\ottmv{j}}}  \ottsym{:}  \ottnt{e_{\ottmv{j}}}  \ottsym{\}} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Obj}}{}%
}}


\newcommand{\ottdruleArr}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottnt{e}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{]} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottnt{e'}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{]} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Arr}}{}%
}}


\newcommand{\ottdrulePropOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{e}  \ottsym{.}  \ottmv{l} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'}  \ottsym{.}  \ottmv{l} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Prop1}}{}%
}}


\newcommand{\ottdrulePropTwo}[1]{\ottdrule[#1]{%
}{
 \langle  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{j}}}  \ottsym{:}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottmv{l}  \ottsym{:}  \ottnt{v}  \ottsym{,}  \ottmv{l'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l'_{\ottmv{j}}}  \ottsym{:}  \ottnt{v'_{\ottmv{j}}}  \ottsym{\}}  \ottsym{.}  \ottmv{l} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Prop2}}{}%
}}


\newcommand{\ottdruleCallOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{e}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Call1}}{}%
}}


\newcommand{\ottdruleCallTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{v}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{j}}}  \ottsym{)} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{v}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{,}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{j}}}  \ottsym{)} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{Call2}}{}%
}}


\newcommand{\ottdruleCallThree}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{m} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \ottsym{,}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{]}  \ottsym{)}  \rangle  \rightarrow  \langle  \ottmv{return} \, \ottnt{v}  \ottsym{;}  \ottnt{m'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottsym{del(}  \ottnt{s'}  \ottsym{,}  \ottsym{[}  \ottmv{id}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{Call3}}{}%
}}


\newcommand{\ottdruleCallFour}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{m} ,  \ottsym{put(}  \ottnt{s}  \ottsym{,}  \ottsym{[}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{]}  \ottsym{,}  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{]}  \ottsym{)}  \rangle  \rightarrow  \langle  \ottmv{return} \, \ottnt{v}  \ottsym{;}  \ottnt{m'} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottsym{del(}  \ottnt{s'}  \ottsym{,}  \ottsym{[}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{]}  \ottsym{)}  \rangle }{%
{\ottdrulename{Call4}}{}%
}}


\newcommand{\ottdrulePropCall}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{v}  \ottsym{.}  \ottmv{l} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  \rangle }%
}{
 \langle  \ottnt{v}  \ottsym{.}  \ottmv{l}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{this}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \ottsym{(}  \ottnt{v}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s'}  \rangle }{%
{\ottdrulename{PropCall}}{}%
}}

\newcommand{\ottdefnreduce}[1]{\begin{ottdefnblock}[#1]{$ \langle  \ottnt{m} ,  \ottnt{s}  \rangle  \rightarrow  \langle  \ottnt{m'} ,  \ottnt{s'}  \rangle $}{}
\ottusedrule{\ottdruleSeqOne{}}
\ottusedrule{\ottdruleSeqTwo{}}
\ottusedrule{\ottdruleAssignOne{}}
\ottusedrule{\ottdruleAssign{}}
\ottusedrule{\ottdruleAssignNum{}}
\ottusedrule{\ottdruleDeref{}}
\ottusedrule{\ottdruleVarOne{}}
\ottusedrule{\ottdruleVarTwo{}}
\ottusedrule{\ottdruleVarThree{}}
\ottusedrule{\ottdruleVarFour{}}
\ottusedrule{\ottdruleFuncDef{}}
\ottusedrule{\ottdruleUnOpOne{}}
\ottusedrule{\ottdruleUnOpTwo{}}
\ottusedrule{\ottdruleBinOpOne{}}
\ottusedrule{\ottdruleBinOpTwo{}}
\ottusedrule{\ottdruleBinOpThree{}}
\ottusedrule{\ottdruleBoolNeg{}}
\ottusedrule{\ottdruleNumNeg{}}
\ottusedrule{\ottdrulePostInc{}}
\ottusedrule{\ottdrulePreInc{}}
\ottusedrule{\ottdrulePostDec{}}
\ottusedrule{\ottdrulePreDec{}}
\ottusedrule{\ottdruleIfOne{}}
\ottusedrule{\ottdruleIfTwo{}}
\ottusedrule{\ottdruleIfThree{}}
\ottusedrule{\ottdruleIfFour{}}
\ottusedrule{\ottdruleWhile{}}
\ottusedrule{\ottdruleFor{}}
\ottusedrule{\ottdruleObj{}}
\ottusedrule{\ottdruleArr{}}
\ottusedrule{\ottdrulePropOne{}}
\ottusedrule{\ottdrulePropTwo{}}
\ottusedrule{\ottdruleCallOne{}}
\ottusedrule{\ottdruleCallTwo{}}
\ottusedrule{\ottdruleCallThree{}}
\ottusedrule{\ottdruleCallFour{}}
\ottusedrule{\ottdrulePropCall{}}
\end{ottdefnblock}}

%% defn expType
\newcommand{\ottdruleVXXNum}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottnt{n}  :  \ottkw{number} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Num}}{}%
}}


\newcommand{\ottdruleVXXBool}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottnt{b}  :  \ottkw{boolean} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Bool}}{}%
}}


\newcommand{\ottdruleVXXString}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottkw{str}  :  \ottkw{string} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_String}}{}%
}}


\newcommand{\ottdruleVXXUndefined}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottkw{undefined}  :  \ottkw{undefined} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Undefined}}{}%
}}


\newcommand{\ottdruleVXXNull}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottkw{null}  :  \ottkw{null} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Null}}{}%
}}


\newcommand{\ottdruleVXXObj}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T'_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \hdots   \Gamma_{{\ottmv{k}-1}}   \vdash   \ottnt{e_{\ottmv{k}}}  :  \ottnt{T'_{\ottmv{k}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma_{\ottmv{k}}  }%
\ottpremise{\ottnt{C}  \ottsym{=}     \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottnt{C_{\ottmv{i}}}    \cup    \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottsym{\{}  \ottnt{T_{\ottmv{i}}} \,  =  \, \ottnt{T'_{\ottmv{i}}}  \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{k}}}  \ottsym{:}  \ottnt{e_{\ottmv{k}}}  \ottsym{\}}  :  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{k}}}  \ottsym{:}  \ottnt{T_{\ottmv{k}}}  \ottsym{\}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma_{\ottmv{k}} }{%
{\ottdrulename{V\_Obj}}{}%
}}


\newcommand{\ottdruleVXXArr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{  \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \hdots   \Gamma_{{\ottmv{k}-1}}   \vdash   \ottnt{e_{\ottmv{k}}}  :  \ottnt{T_{\ottmv{k}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma_{\ottmv{k}}  }%
\ottpremise{\ottnt{C}  \ottsym{=}     \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottnt{C_{\ottmv{i}}}    \cup    \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottsym{\{}  \ottnt{T} \,  \succeq_c  \, \ottnt{T'_{\ottmv{i}}}  \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{]}  :  \ottsym{[}  \ottnt{T}  \ottsym{]} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma_{\ottmv{k}} }{%
{\ottdrulename{V\_Arr}}{}%
}}


\newcommand{\ottdruleVXXFunOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{\}}    \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{IllDefined} \, \ottsym{(}  \ottkw{pending}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :  \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T}  \ottsym{)} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottkw{undefined}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Fun1}}{}%
}}


\newcommand{\ottdruleVXXFunTwo}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{\}}    \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottnt{T_{\ottmv{k}}}}%
\ottpremise{ \ottnt{T_{\ottmv{k}}}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'_{\ottmv{k}}}  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :  \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T}  \ottsym{)} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T_{\ottmv{k}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Fun2}}{}%
}}


\newcommand{\ottdruleVXXFunThree}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottmv{id}  \ottsym{:}  \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T}  \ottsym{)}  \ottsym{\}}    \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{IllDefined} \, \ottsym{(}  \ottkw{pending}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :  \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T}  \ottsym{)} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottkw{undefined}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Fun3}}{}%
}}


\newcommand{\ottdruleVXXFunFour}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottmv{id}  \ottsym{:}  \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T}  \ottsym{)}  \ottsym{\}}    \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottnt{T_{\ottmv{k}}}}%
\ottpremise{ \ottnt{T_{\ottmv{k}}}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'_{\ottmv{k}}}  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :  \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T}  \ottsym{)} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T_{\ottmv{k}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Fun4}}{}%
}}


\newcommand{\ottdruleIdType}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{(}  \ottmv{id}  \ottsym{)}  \ottsym{=}  \ottnt{T}}%
\ottpremise{ \ottnt{T}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'}  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottmv{id}  :  \ottnt{T} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{IdType}}{}%
}}


\newcommand{\ottdrulePropType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l}  :  \ottnt{T} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{T}  \ottsym{\}} \,  \succeq  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }{%
{\ottdrulename{PropType}}{}%
}}


\newcommand{\ottdruleArrayType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}  :  \ottnt{T} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottsym{[}  \ottnt{T}  \ottsym{]} \,  \succeq  \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{ArrayType}}{}%
}}


\newcommand{\ottdruleCallType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottnt{T_{\ottmv{k}}}  \ottsym{,}  \ottnt{T'_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{  \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T'_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \hdots   \Gamma_{{\ottmv{i}-1}}   \vdash   \ottnt{e_{\ottmv{i}}}  :  \ottnt{T'_{\ottmv{i}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{i}}}  } \hspace{5pt}  \Gamma_{\ottmv{i}}  }%
\ottpremise{\ottnt{C'}  \ottsym{=}     \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  =  \, \ottkw{undefined}  \ottsym{\}}  \cup    \bigcup \limits_{ \ottmv{j} = \ottsym{1} }^ \ottmv{i}   \ottsym{\{}  \ottnt{T_{\ottmv{j}}} \,  \succeq_c  \, \ottnt{T'_{\ottmv{j}}}  \ottsym{\}}      \cup    \ottsym{\{}  \ottnt{T_{\ottmv{k}}} \,  \preceq_c  \, \ottnt{T'_{\ottmv{k}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T_{\ottmv{k}}}  \ottsym{)}  \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)}  :  \ottnt{T'_{\ottmv{k}}} \hspace{5pt}| _{     \bigcup \limits_{ \ottmv{j} = \ottsym{0} }^ \ottmv{i}   \ottnt{C_{\ottmv{j}}}    \cup  \ottnt{C'}   } \hspace{5pt}  \Gamma_{\ottmv{i}} }{%
{\ottdrulename{CallType}}{}%
}}


\newcommand{\ottdrulePropCallType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottnt{T_{\ottmv{k}}}  \ottsym{,}  \ottnt{T'_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T'_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C'}  } \hspace{5pt}  \Gamma' }%
\ottpremise{  \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T'_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \hdots   \Gamma_{{\ottmv{i}-1}}   \vdash   \ottnt{e_{\ottmv{i}}}  :  \ottnt{T'_{\ottmv{i}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{i}}}  } \hspace{5pt}  \Gamma_{\ottmv{i}}  }%
\ottpremise{\ottnt{C'}  \ottsym{=}     \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  \succeq_c  \, \ottnt{T'_{{\mathrm{0}}}}  \ottsym{\}}  \cup    \bigcup \limits_{ \ottmv{j} = \ottsym{1} }^ \ottmv{i}   \ottsym{\{}  \ottnt{T_{\ottmv{j}}} \,  \succeq_c  \, \ottnt{T'_{\ottmv{j}}}  \ottsym{\}}      \cup    \ottsym{\{}  \ottnt{T_{\ottmv{k}}} \,  \preceq_c  \, \ottnt{T'_{\ottmv{k}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottsym{(}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T_{\ottmv{k}}}  \ottsym{)}  \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)}  :  \ottnt{T'_{\ottmv{k}}} \hspace{5pt}| _{     \bigcup \limits_{ \ottmv{j} = \ottsym{0} }^ \ottmv{i}   \ottnt{C_{\ottmv{j}}}    \cup  \ottnt{C'}   } \hspace{5pt}  \Gamma_{\ottmv{i}} }{%
{\ottdrulename{PropCallType}}{}%
}}


\newcommand{\ottdruleAssignType}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{(}  \ottmv{id}  \ottsym{)}  \ottsym{=}  \ottnt{T}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e'}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
}{
 \Gamma   \vdash   \ottmv{id} \, \ottsym{=} \, \ottnt{e'}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{   \ottnt{C_{{\mathrm{1}}}}  \cup  \ottsym{\{}  \ottnt{T} \,  \succeq_c  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}   } \hspace{5pt}   \Gamma_{{\mathrm{1}}}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  }{%
{\ottdrulename{AssignType}}{}%
}}


\newcommand{\ottdruleAssignTypeUndef}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \ottmv{id}  \notin  \ottsym{dom(}  \Gamma  \ottsym{)} }%
\ottpremise{ \Gamma   \vdash   \ottnt{e'}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
}{
 \Gamma   \vdash   \ottmv{id} \, \ottsym{=} \, \ottnt{e'}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{   \ottnt{C_{{\mathrm{1}}}}  \cup  \ottsym{\{}  \ottnt{T} \,  \succeq_c  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}   } \hspace{5pt}   \Gamma_{{\mathrm{2}}}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{AssignTypeUndef}}{}%
}}


\newcommand{\ottdrulePropAssignType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e'}  :  \ottnt{T'} \hspace{5pt}| _{  \ottnt{C'}  } \hspace{5pt}  \Gamma' }%
\ottpremise{ \Gamma'   \vdash   \ottmv{id}  :  \ottnt{T_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma'' }%
\ottpremise{ \Gamma'   \vdash   \ottmv{id}  \ottsym{.}  \ottmv{l_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma'' }%
\ottpremise{ \Gamma'   \vdash   \ottmv{id}  \ottsym{.}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{.}  \ottmv{l_{\ottmv{k}}}  :  \ottnt{T_{\ottmv{k}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma'' }%
\ottpremise{\Gamma_{{\mathrm{1}}}  \ottsym{=}   \Gamma_{\ottmv{k}}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{\{}  \ottmv{l_{\ottmv{k}}}  \ottsym{:}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  \Rightarrow  \ottnt{T_{\ottmv{k}}}  \ottsym{\}}  \Rightarrow  \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  \Rightarrow  \ottnt{T_{{\mathrm{0}}}}  \ottsym{\}} }%
\ottpremise{\ottnt{C}  \ottsym{=}   \ottsym{\{}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{T_{{\mathrm{3}}}}  \ottsym{\}} \,  \succeq_o  \, \ottnt{T_{\ottmv{k}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T} \,  \succeq_c  \, \ottnt{T'}  \ottsym{\}} }%
}{
 \Gamma   \vdash   \ottmv{id}  \ottsym{.}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{.}  \ottmv{l_{\ottmv{k}}}  \ottsym{.}  \ottmv{l} \, \ottsym{=} \, \ottnt{e'}  :  \ottnt{T'} \hspace{5pt}| _{     \bigcup \limits_{ \ottmv{j} = \ottsym{0} }^ \ottmv{i}   \ottnt{C_{\ottmv{j}}}    \cup    \ottnt{C'}  \cup  \ottnt{C}     } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }{%
{\ottdrulename{PropAssignType}}{}%
}}


\newcommand{\ottdruleArrayAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
\ottpremise{ \Gamma_{{\mathrm{2}}}   \vdash   \ottnt{e_{{\mathrm{3}}}}  :  \ottnt{T_{{\mathrm{3}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{3}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}  \ottsym{=} \, \ottnt{e_{{\mathrm{3}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{       \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup  \ottnt{C_{{\mathrm{3}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{number}  \ottsym{\}}  \cup  \ottsym{\{}  \ottsym{[}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{]} \,  \succeq_c  \, \ottnt{T_{{\mathrm{3}}}}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }{%
{\ottdrulename{ArrayAssignType}}{}%
}}


\newcommand{\ottdruleNumAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottmv{id}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma   \vdash   \ottnt{e'}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottmv{id} \, \ottnt{numOp}  \ottsym{=} \, \ottnt{e'}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{NumAssignType}}{}%
}}


\newcommand{\ottdrulePropNumAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e'}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l} \, \ottnt{numOp}  \ottsym{=} \, \ottnt{e'}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottkw{number}  \ottsym{\}} \,  \succeq  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{PropNumAssignType}}{}%
}}


\newcommand{\ottdruleArrayNumAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
\ottpremise{ \Gamma_{{\mathrm{2}}}   \vdash   \ottnt{e_{{\mathrm{3}}}}  :  \ottnt{T_{{\mathrm{3}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{3}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  \ottsym{[}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}  \ottnt{numOp}  \ottsym{=} \, \ottnt{e_{{\mathrm{3}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{       \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup  \ottnt{C_{{\mathrm{3}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  \cup    \ottsym{\{}  \ottsym{[}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{]} \,  =  \, \ottsym{[}  \ottkw{number}  \ottsym{]}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{3}}}} \,  =  \, \ottkw{number}  \ottsym{\}}       } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }{%
{\ottdrulename{ArrayNumAssignType}}{}%
}}


\newcommand{\ottdruleNumOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{numOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{number} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{NumOpType}}{}%
}}


\newcommand{\ottdruleBoolOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{boolOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{boolean} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{BoolOpType}}{}%
}}


\newcommand{\ottdruleCmpOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{cmpOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{boolean} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{CmpOpType}}{}%
}}


\newcommand{\ottdruleNumCmpOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{numcmpOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{boolean} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{number}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{NumCmpOpType}}{}%
}}


\newcommand{\ottdruleNegType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash    !\!  \, \ottnt{e}  :  \ottkw{boolean} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{NegType}}{}%
}}


\newcommand{\ottdrulePreNumType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottnt{preNum} \, \ottnt{e}  :  \ottkw{number} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{PreNumType}}{}%
}}


\newcommand{\ottdrulePostOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottnt{e} \, \ottnt{postOp}  :  \ottkw{number} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{PostOpType}}{}%
}}

\newcommand{\ottdefnexpType}[1]{\begin{ottdefnblock}[#1]{$ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' $}{}
\ottusedrule{\ottdruleVXXNum{}}
\ottusedrule{\ottdruleVXXBool{}}
\ottusedrule{\ottdruleVXXString{}}
\ottusedrule{\ottdruleVXXUndefined{}}
\ottusedrule{\ottdruleVXXNull{}}
\ottusedrule{\ottdruleVXXObj{}}
\ottusedrule{\ottdruleVXXArr{}}
\ottusedrule{\ottdruleVXXFunOne{}}
\ottusedrule{\ottdruleVXXFunTwo{}}
\ottusedrule{\ottdruleVXXFunThree{}}
\ottusedrule{\ottdruleVXXFunFour{}}
\ottusedrule{\ottdruleIdType{}}
\ottusedrule{\ottdrulePropType{}}
\ottusedrule{\ottdruleArrayType{}}
\ottusedrule{\ottdruleCallType{}}
\ottusedrule{\ottdrulePropCallType{}}
\ottusedrule{\ottdruleAssignType{}}
\ottusedrule{\ottdruleAssignTypeUndef{}}
\ottusedrule{\ottdrulePropAssignType{}}
\ottusedrule{\ottdruleArrayAssignType{}}
\ottusedrule{\ottdruleNumAssignType{}}
\ottusedrule{\ottdrulePropNumAssignType{}}
\ottusedrule{\ottdruleArrayNumAssignType{}}
\ottusedrule{\ottdruleNumOpType{}}
\ottusedrule{\ottdruleBoolOpType{}}
\ottusedrule{\ottdruleCmpOpType{}}
\ottusedrule{\ottdruleNumCmpOpType{}}
\ottusedrule{\ottdruleNegType{}}
\ottusedrule{\ottdrulePreNumType{}}
\ottusedrule{\ottdrulePostOpType{}}
\end{ottdefnblock}}

%% defn typable
\newcommand{\ottdruleVXXFunDef}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottsym{@def} \, \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{V\_FunDef}}{}%
}}


\newcommand{\ottdruleExpTypable}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottnt{e}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{ExpTypable}}{}%
}}


\newcommand{\ottdruleRetTypableOne}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{ \ottmv{return}  \notin  \ottsym{dom(}  \Gamma  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottmv{return} \, \ottnt{e}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{return}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{RetTypable1}}{}%
}}


\newcommand{\ottdruleRetTypableTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{ \ottmv{return}  \in  \ottsym{dom(}  \Gamma  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottmv{return} \, \ottnt{e}  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \Gamma  \ottsym{["return"]}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{RetTypable2}}{}%
}}


\newcommand{\ottdruleRetTypableThree}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{return}  \notin  \ottsym{dom(}  \Gamma  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottmv{return}  \hspace{5pt}| _{  \varnothing  } \hspace{5pt}   \Gamma  \cup  \ottsym{\{}  \ottmv{return}  \ottsym{:}  \ottkw{undefined}  \ottsym{\}}  }{%
{\ottdrulename{RetTypable3}}{}%
}}


\newcommand{\ottdruleRetTypableFour}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{return}  \in  \ottsym{dom(}  \Gamma  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottmv{return}  \hspace{5pt}| _{  \ottsym{\{}  \ottkw{undefined} \,  =  \, \Gamma  \ottsym{["return"]}  \ottsym{\}}  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{RetTypable4}}{}%
}}


\newcommand{\ottdruleSeqTypable}[1]{\ottdrule[#1]{%
\ottpremise{  \Gamma   \vdash   \ottnt{m_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \hdots   \Gamma_{{\ottmv{i}-1}}   \vdash   \ottnt{m_{\ottmv{i}}}  \hspace{5pt}| _{  \ottnt{C_{\ottmv{i}}}  } \hspace{5pt}  \Gamma_{\ottmv{i}}  }%
}{
 \Gamma   \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  \ottnt{m_{\ottmv{i}}}  \hspace{5pt}| _{   \bigcup \limits_{ \ottmv{i} = \ottsym{0} }^ \ottmv{k}   \ottnt{C_{\ottmv{i}}}   } \hspace{5pt}  \Gamma_{\ottmv{i}} }{%
{\ottdrulename{SeqTypable}}{}%
}}


\newcommand{\ottdruleIfTypableOne}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{m_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{m_{{\mathrm{2}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{3}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }%
}{
 \Gamma   \vdash   \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}}  \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup    \ottnt{C_{{\mathrm{2}}}}  \cup  \ottnt{C_{{\mathrm{3}}}}      \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }{%
{\ottdrulename{IfTypable1}}{}%
}}


\newcommand{\ottdruleIfTypableTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{m_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}  \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }{%
{\ottdrulename{IfTypable2}}{}%
}}


\newcommand{\ottdruleDecTypable}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
}{
 \Gamma   \vdash   \ottkw{var} \, \ottmv{id}  \hspace{5pt}| _{  \varnothing  } \hspace{5pt}   \Gamma  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{DecTypable}}{}%
}}


\newcommand{\ottdruleDefTypable}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T'} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{e}  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T'} \,  \preceq_c  \, \ottnt{T}  \ottsym{\}}   } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T'}  \ottsym{\}}  }{%
{\ottdrulename{DefTypable}}{}%
}}


\newcommand{\ottdruleMultiDecTypable}[1]{\ottdrule[#1]{%
\ottpremise{  \Gamma   \vdash   \ottkw{var} \, \ottnt{vd_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \hdots   \Gamma_{{\ottmv{k}-1}}   \vdash   \ottkw{var} \, \ottnt{vd_{\ottmv{k}}}  \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma_{\ottmv{k}}  }%
}{
 \Gamma   \vdash   \ottkw{var} \, \ottnt{vd_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{vd_{\ottmv{k}}}  \hspace{5pt}| _{    \bigcup \limits_{ \ottmv{i} = \ottmv{i} }^ \ottmv{k}   \ottnt{C_{\ottmv{k}}}    } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{MultiDecTypable}}{}%
}}

\newcommand{\ottdefntypable}[1]{\begin{ottdefnblock}[#1]{$ \Gamma   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' $}{}
\ottusedrule{\ottdruleVXXFunDef{}}
\ottusedrule{\ottdruleExpTypable{}}
\ottusedrule{\ottdruleRetTypableOne{}}
\ottusedrule{\ottdruleRetTypableTwo{}}
\ottusedrule{\ottdruleRetTypableThree{}}
\ottusedrule{\ottdruleRetTypableFour{}}
\ottusedrule{\ottdruleSeqTypable{}}
\ottusedrule{\ottdruleIfTypableOne{}}
\ottusedrule{\ottdruleIfTypableTwo{}}
\ottusedrule{\ottdruleDecTypable{}}
\ottusedrule{\ottdruleDefTypable{}}
\ottusedrule{\ottdruleMultiDecTypable{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsJop}{
\ottdefnreduce{}\ottdefnexpType{}\ottdefntypable{}}

\newcommand{\ottdefnss}{
\ottdefnsJop
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        79 good    0 bad
Definition rule clauses: 189 good    0 bad
\end{verbatim}
\end{document}

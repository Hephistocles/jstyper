% generated by Ott 0.25 from: src/formal/jstyper.ott
\documentclass[11pt]{article}
\usepackage{amsmath,amssymb}
\usepackage{supertabular}
\usepackage{geometry}
\usepackage{ifthen}
\usepackage{alltt}%hack
\geometry{a4paper,dvips,twoside,left=22.5mm,right=22.5mm,top=20mm,bottom=30mm}
\usepackage{color}
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
	\usepackage{txfonts}
	\usepackage{lmodern}
	\newcommand*{\orig}{\ensuremath{\!\multimapinv\!} }

\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \ottmv{termvar} ,\, \ottmv{x} ,\, \ottmv{y} ,\, \ottmv{z} ,\, \ottmv{id} ,\, \ottmv{l} ,\, \ottmv{this} ,\, \ottmv{return} $ &  \\
 $ \ottmv{index} ,\, \ottmv{i} ,\, \ottmv{j} ,\, \ottmv{k} ,\, \ottmv{o} $ &  \\
}}

\newcommand{\ottv}{
\ottrulehead{\ottnt{v}}{::=}{\ottcom{Values}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{b}}{}{}{}{\ottcom{Boolean}}\ottprodnewline
\ottprodline{|}{\ottnt{n}}{}{}{}{\ottcom{Number}}\ottprodnewline
\ottprodline{|}{\ottkw{str}}{}{}{}{\ottcom{String}}\ottprodnewline
\ottprodline{|}{\ottkw{undefined}}{}{}{}{\ottcom{Undefined}}\ottprodnewline
\ottprodline{|}{\ottkw{null}}{}{}{}{\ottcom{null}}\ottprodnewline
\ottprodline{|}{\ottnt{obj}}{}{}{}{\ottcom{ObjVal}}\ottprodnewline
\ottprodline{|}{\ottnt{arr}}{}{}{}{\ottcom{ArrVal}}\ottprodnewline
\ottprodline{|}{ [\![  \ottnt{func} ,  \ottnt{s}  ]\!] }{}{}{}{\ottcom{FuncClosure}}\ottprodnewline
\ottprodline{|}{\Theta  \ottsym{(}  \ottnt{a}  \ottsym{)}}{}{}{}{\ottcom{GetStore}}\ottprodnewline
\ottprodline{|}{ \ottnt{v_{{\mathrm{1}}}}  \cup  \ottnt{v_{{\mathrm{2}}}} }{}{}{}{\ottcom{ObjUnion}}}

\newcommand{\ottobj}{
\ottrulehead{\ottnt{obj}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{i}}}  \ottsym{:}  \ottnt{v_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{ObjVal}}}

\newcommand{\ottarr}{
\ottrulehead{\ottnt{arr}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{{\mathrm{2}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrayVal}}}

\newcommand{\ottfunc}{
\ottrulehead{\ottnt{func}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}}{}{}{}{\ottcom{FuncVal}}\ottprodnewline
\ottprodline{|}{\ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}}{}{}{}{\ottcom{AnonFuncVal}}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{Expression}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{v}}{}{}{}{\ottcom{Value}}\ottprodnewline
\ottprodline{|}{\ottmv{id}}{}{}{}{\ottcom{Deref}}\ottprodnewline
\ottprodline{|}{\ottnt{assignTarget} \, \approx \, \ottnt{e_{{\mathrm{2}}}}}{}{}{}{\ottcom{Assign}}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{op} \, \ottnt{e'}}{}{}{}{\ottcom{BinExp}}\ottprodnewline
\ottprodline{|}{\ottnt{assignTarget} \, \ottnt{postAssign}}{}{}{}{\ottcom{PostAssign}}\ottprodnewline
\ottprodline{|}{\ottnt{preAssign} \, \ottnt{assignTarget}}{}{}{}{\ottcom{PreAssign}}\ottprodnewline
\ottprodline{|}{\ottnt{preOp} \, \ottnt{e}}{}{}{}{\ottcom{PreExp}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{i}}}  \ottsym{:}  \ottnt{e_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{ObjExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{.}  \ottmv{l}}{}{}{}{\ottcom{PropExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrExp}}\ottprodnewline
\ottprodline{|}{\ottnt{e}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}}{}{}{}{\ottcom{CallExp}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrayExp}}\ottprodnewline
\ottprodline{|}{\ottnt{assignTarget}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{func}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ [\![ @body\{ \ottnt{m} \},  \ottnt{s} ,  \Theta  ]\!] }{}{}{}{}}

\newcommand{\ottAss}{
\ottrulehead{\approx}{::=}{\ottcom{Assignments}}\ottprodnewline
\ottfirstprodline{|}{\ottsym{=}}{}{}{}{\ottcom{PlainAssign}}\ottprodnewline
\ottprodline{|}{\ottnt{numOp}  \ottsym{=}}{}{}{}{\ottcom{NumAssign}}}

\newcommand{\ottvRef}{
\ottrulehead{\ottnt{vRef}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{id}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{vRef}  \ottsym{.}  \ottmv{l}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{vRef}  \ottsym{[}  \ottnt{n}  \ottsym{]}}{}{}{}{}}

\newcommand{\ottassignTarget}{
\ottrulehead{\ottnt{assignTarget}}{::=}{\ottcom{Assignment Targets}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{vRef}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{assignTarget}  \ottsym{[}  \ottnt{e}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{assignTarget}  \ottsym{.}  \ottmv{l}}{}{}{}{}}

\newcommand{\ottm}{
\ottrulehead{\ottnt{m}}{::=}{\ottcom{Statement}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{e}}{}{}{}{\ottcom{Expression}}\ottprodnewline
\ottprodline{|}{\ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}}}{}{}{}{\ottcom{Seqs}}\ottprodnewline
\ottprodline{|}{\ottnt{varDec}}{}{}{}{\ottcom{VarDeclaration}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{IfStatement}}\ottprodnewline
\ottprodline{|}{\ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}}}{}{}{}{\ottcom{IfElseStatement}}\ottprodnewline
\ottprodline{|}{\ottmv{return} \, \ottnt{e}}{}{}{}{\ottcom{ReturnStatement}}\ottprodnewline
\ottprodline{|}{\ottmv{return}}{}{}{}{\ottcom{Return}}\ottprodnewline
\ottprodline{|}{\ottsym{@def} \, \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{k}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}}{}{}{}{\ottcom{FuncDef}}\ottprodnewline
\ottprodline{|}{\ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{WhileStatement}}\ottprodnewline
\ottprodline{|}{\ottkw{for} \, \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{ForStatement1}}\ottprodnewline
\ottprodline{|}{\ottkw{for} \, \ottsym{(}  \ottnt{varDec}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}}{}{}{}{\ottcom{ForStatement2}}\ottprodnewline
\ottprodline{|}{ \epsilon }{}{}{}{\ottcom{EmptyStatement}}}

\newcommand{\ottvd}{
\ottrulehead{\ottnt{vd}}{::=}{\ottcom{VariableDeclaration}}\ottprodnewline
\ottfirstprodline{|}{\ottmv{id}}{}{}{}{\ottcom{Declaration}}\ottprodnewline
\ottprodline{|}{\ottmv{id}  \ottsym{=}  \ottnt{e}}{}{}{}{\ottcom{Definition}}}

\newcommand{\ottvarDec}{
\ottrulehead{\ottnt{varDec}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{var} \, \ottnt{vd_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{vd_{\ottmv{k}}}}{}{}{}{\ottcom{VarDeclaration}}}

\newcommand{\ottret}{
\ottrulehead{\ottnt{ret}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{return} \, \ottnt{e}}{}{}{}{\ottcom{ReturnExp}}\ottprodnewline
\ottprodline{|}{\ottmv{return}}{}{}{}{\ottcom{Return}}}

\newcommand{\ottop}{
\ottrulehead{\ottnt{op}}{::=}{\ottcom{BinaryOperation}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{numOp}}{}{}{}{\ottcom{NumOp}}\ottprodnewline
\ottprodline{|}{\ottnt{cmpOp}}{}{}{}{\ottcom{CmpOp}}\ottprodnewline
\ottprodline{|}{\ottnt{numcmpOp}}{}{}{}{\ottcom{NumCmpOp}}\ottprodnewline
\ottprodline{|}{\ottnt{boolOp}}{}{}{}{\ottcom{BoolOp}}}

\newcommand{\ottnumOp}{
\ottrulehead{\ottnt{numOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{+}}{}{}{}{\ottcom{Addition}}\ottprodnewline
\ottprodline{|}{\ottsym{-}}{}{}{}{\ottcom{Subtraction}}\ottprodnewline
\ottprodline{|}{\ottsym{/}}{}{}{}{\ottcom{Division}}\ottprodnewline
\ottprodline{|}{\ottsym{*}}{}{}{}{\ottcom{Multiplication}}\ottprodnewline
\ottprodline{|}{\ottsym{\%}}{}{}{}{\ottcom{Modulo}}}

\newcommand{\ottnumcmpOp}{
\ottrulehead{\ottnt{numcmpOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{<}}{}{}{}{\ottcom{LessThan}}\ottprodnewline
\ottprodline{|}{\ottsym{>}}{}{}{}{\ottcom{GreaterThan}}\ottprodnewline
\ottprodline{|}{ \leq }{}{}{}{\ottcom{LessEqual}}\ottprodnewline
\ottprodline{|}{ \geq }{}{}{}{\ottcom{GreaterEqual}}}

\newcommand{\ottcmpOp}{
\ottrulehead{\ottnt{cmpOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{==}}{}{}{}{\ottcom{Equal}}\ottprodnewline
\ottprodline{|}{ !\!\!= }{}{}{}{\ottcom{Unequal}}\ottprodnewline
\ottprodline{|}{\ottsym{===}}{}{}{}{\ottcom{StrictEqual}}\ottprodnewline
\ottprodline{|}{ !\!\!== }{}{}{}{\ottcom{StrictUnequal}}}

\newcommand{\ottboolOp}{
\ottrulehead{\ottnt{boolOp}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{\mbox{$\mid$}\mbox{$\mid$}}}{}{}{}{\ottcom{BooleanOr}}\ottprodnewline
\ottprodline{|}{\ottsym{\&\&}}{}{}{}{\ottcom{BooleanAnd}}}

\newcommand{\ottpreOp}{
\ottrulehead{\ottnt{preOp}}{::=}{\ottcom{PrefixOperation}}\ottprodnewline
\ottfirstprodline{|}{ -\! }{}{}{}{\ottcom{Negation}}\ottprodnewline
\ottprodline{|}{ !\! }{}{}{}{\ottcom{BoolNegation}}}

\newcommand{\ottpreAssign}{
\ottrulehead{\ottnt{preAssign}}{::=}{\ottcom{PreAssign}}\ottprodnewline
\ottfirstprodline{|}{ -\!\!-\!\! }{}{}{}{\ottcom{PreDecrement}}\ottprodnewline
\ottprodline{|}{ +\!\!+\!\! }{}{}{}{\ottcom{PreIncrement}}}

\newcommand{\ottpostAssign}{
\ottrulehead{\ottnt{postAssign}}{::=}{\ottcom{PostAssign}}\ottprodnewline
\ottfirstprodline{|}{ \!\!\!-\!\!- }{}{}{}{\ottcom{PostDecrement}}\ottprodnewline
\ottprodline{|}{ \!\!+\!\!+ }{}{}{}{\ottcom{PostIncrement}}}

\newcommand{\otta}{
\ottrulehead{\ottnt{a}}{::=}{\ottcom{Heap Addresses}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{s}  \ottsym{(}  \ottmv{id}  \ottsym{)}}{}{}{}{\ottcom{StoreAddress}}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{[}  \ottmv{l}  \ottsym{]}}{}{}{}{\ottcom{PropAddress}}\ottprodnewline
\ottprodline{|}{\ottnt{a}  \ottsym{[}  \ottnt{n}  \ottsym{]}}{}{}{}{\ottcom{ArrAddress}}\ottprodnewline
\ottprodline{|}{\ottkw{addr} \, \ottsym{(}  \ottnt{e}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}}{}{}{}{\ottcom{AddrLookup}}}

\newcommand{\otts}{
\ottrulehead{\ottnt{s}}{::=}{\ottcom{Store}}\ottprodnewline
\ottfirstprodline{|}{ \ottnt{s_{{\mathrm{1}}}}  \cup  \ottnt{s_{{\mathrm{2}}}} }{}{}{}{\ottcom{StoreUnion}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{id_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{id_{\ottmv{i}}}  \ottsym{:}  \ottnt{a_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{LiteralStore}}}

\newcommand{\otth}{
\ottrulehead{\Theta}{::=}{\ottcom{Heap}}\ottprodnewline
\ottfirstprodline{|}{ \Theta_{{\mathrm{1}}}  \oplus  \Theta_{{\mathrm{2}}} }{}{}{}{\ottcom{HeapUnion}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{a_{\ottmv{k}}}  \ottsym{:}  \ottnt{v_{\ottmv{k}}}  \ottsym{\}}}{}{}{}{\ottcom{LiteralHeap}}}

\newcommand{\ottb}{
\ottrulehead{\ottnt{b}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{true}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{false}}{}{}{}{}}

\newcommand{\ottT}{
\ottrulehead{\ottnt{T}}{::=}{\ottcom{Value Type}}\ottprodnewline
\ottfirstprodline{|}{\ottkw{number}}{}{}{}{\ottcom{Number}}\ottprodnewline
\ottprodline{|}{\ottkw{boolean}}{}{}{}{\ottcom{Boolean}}\ottprodnewline
\ottprodline{|}{\ottkw{string}}{}{}{}{\ottcom{String}}\ottprodnewline
\ottprodline{|}{\ottkw{undefined}}{}{}{}{\ottcom{undefined}}\ottprodnewline
\ottprodline{|}{\ottkw{null}}{}{}{}{\ottcom{null}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{\}}}{}{}{}{\ottcom{ObjType}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T_{\ottmv{j}}}}{}{}{}{\ottcom{FunctionType}}\ottprodnewline
\ottprodline{|}{ [\![  \ottnt{T} ,  \Gamma , ]\!] }{}{}{}{\ottcom{ClosureType}}\ottprodnewline
\ottprodline{|}{\ottsym{[}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{]}}{}{}{}{\ottcom{ArrayType}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{["return"]}}{}{}{}{\ottcom{GammaType}}\ottprodnewline
\ottprodline{|}{\ottkw{IllDefined} \, \ottsym{(}  \ottnt{T}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{IllDefinedType}}\ottprodnewline
\ottprodline{|}{\ottkw{pending}} {\textsf{M}}{}{}{\ottcom{Pending}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \multimapinv  \ottnt{T_{{\mathrm{2}}}}}{}{}{}{\ottcom{DerivedType}}}

\newcommand{\ottG}{
\ottrulehead{\Gamma  ,\ \gamma}{::=}{\ottcom{Context}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{\ottcom{EmptyContext}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \Gamma  \ottsym{\}}}{}{}{}{\ottcom{SingletonContext}}\ottprodnewline
\ottprodline{|}{ \Gamma  \cup  \Gamma' }{}{}{}{\ottcom{UnionContext}}\ottprodnewline
\ottprodline{|}{\ottmv{id}  \ottsym{:}  \ottnt{T}}{}{}{}{\ottcom{ContextItem}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottmv{id_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{id_{\ottmv{k}}}  \ottsym{:}  \ottnt{T_{\ottmv{k}}}  \ottsym{\}}}{}{}{}{\ottcom{ContextItems}}\ottprodnewline
\ottprodline{|}{\ottsym{merge(}  \Gamma_{{\mathrm{1}}}  \ottsym{,}  \Gamma_{{\mathrm{2}}}  \ottsym{,}  \Gamma_{{\mathrm{3}}}  \ottsym{)}} {\textsf{M}}{}{}{\ottcom{MergedContext}}}

\newcommand{\ottC}{
\ottrulehead{\ottnt{C}}{::=}{\ottcom{Constraint}}\ottprodnewline
\ottfirstprodline{|}{\varnothing}{}{}{}{\ottcom{EmptyConstraint}}\ottprodnewline
\ottprodline{|}{ \ottnt{C}  \cup  \ottnt{C'} }{}{}{}{\ottcom{UnionConstraint}}\ottprodnewline
\ottprodline{|}{ \ottnt{C}  \cap  \ottnt{C'} }{}{}{}{\ottcom{IntersectConstraint}}\ottprodnewline
\ottprodline{|}{ \bigcup \limits_{ \ottnt{setIndex} = \ottnt{n_{{\mathrm{1}}}} }^ \ottnt{n_{{\mathrm{2}}}}   \ottnt{C} }{}{}{}{\ottcom{BigUnion}}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \, \ottnt{const} \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}}{}{}{}{\ottcom{ConstLeq}}\ottprodnewline
\ottprodline{|}{ \ottnt{C} }{}{}{}{\ottcom{BracketedConstraint}}}

\newcommand{\ottconst}{
\ottrulehead{\ottnt{const}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \preceq }{}{}{}{\ottcom{LEqConstraint}}\ottprodnewline
\ottprodline{|}{ \succeq }{}{}{}{\ottcom{GEqConstraint}}\ottprodnewline
\ottprodline{|}{ {\color{red}\preceq_c} }{}{}{}{\ottcom{LEqCheckConstraint}}\ottprodnewline
\ottprodline{|}{ {\color{red}\succeq_c} }{}{}{}{\ottcom{GEqCheckConstraint}}\ottprodnewline
\ottprodline{|}{ \preceq_o }{}{}{}{\ottcom{LEqOptConstraint}}\ottprodnewline
\ottprodline{|}{ \succeq_o }{}{}{}{\ottcom{GEqOptConstraint}}\ottprodnewline
\ottprodline{|}{ = }{}{}{}{\ottcom{EqConstraint}}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \rightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \multimapinv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{;}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{var}}{}{}{}{}\ottprodnewline
\ottprodline{|}{ \varnothing }{}{}{}{}}

\newcommand{\ottmaps}{
\ottrulehead{\ottnt{maps}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Theta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{addr}}{}{}{}{}}

\newcommand{\ottsv}{
\ottrulehead{\ottnt{sv}}{::=}{\ottcom{SetVar}}\ottprodnewline
\ottfirstprodline{|}{\ottnt{C}}{}{}{}{\ottcom{ConstraintSet}}\ottprodnewline
\ottprodline{|}{\ottkw{X}}{}{}{}{\ottcom{VariableSet}}\ottprodnewline
\ottprodline{|}{\ottsym{dom(}  \ottnt{maps}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{codom(}  \ottnt{maps}  \ottsym{)}}{}{}{}{}}

\newcommand{\ottfv}{
\ottrulehead{\ottnt{fv}}{::=}{\ottcom{FormulaVar}}\ottprodnewline
\ottfirstprodline{|}{\Gamma}{}{}{}{\ottcom{ContextVar}}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{(}  \ottmv{id}  \ottsym{)}}{}{}{}{\ottcom{ContextMember}}\ottprodnewline
\ottprodline{|}{\ottnt{sv}}{}{}{}{\ottcom{SetFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{T}}{}{}{}{\ottcom{TypeFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottmv{id}}{}{}{}{\ottcom{IDFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{func}}{}{}{}{\ottcom{FuncFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{m}}{}{}{}{\ottcom{ExpFormulaVar}}\ottprodnewline
\ottprodline{|}{\ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{maps}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{(}  \ottnt{fv_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{fv_{\ottmv{i}}}  \ottsym{)}}{}{}{}{}}

\newcommand{\ottn}{
\ottrulehead{\ottnt{n}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{0}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{1}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{2}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{3}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{setIndex}}{}{}{}{}}

\newcommand{\ottsetIndex}{
\ottrulehead{\ottnt{setIndex}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{i}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{k}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{j}}{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{\ottcom{judgement}}\ottprodnewline
\ottprodline{|}{ \neg  \ottnt{formula} }{}{}{}{\ottcom{not}}\ottprodnewline
\ottprodline{|}{ ( \ottnt{formula} \!) }{}{}{}{\ottcom{brackets}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula} }{}{}{}{\ottcom{bracketsHidden}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula_{{\mathrm{1}}}}  \quad\hdots\quad  \ottnt{formula_{\ottmv{k}}} }{}{}{}{\ottcom{listForm}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \vee  \ottsym{formula’} }{}{}{}{\ottcom{or}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \wedge  \ottsym{formula’} }{}{}{}{\ottcom{and}}\ottprodnewline
\ottprodline{|}{ \ottnt{formula}  \hspace{1pc}\textit{for}\hspace{6pt}  \ottnt{formula'} }{}{}{}{\ottcom{condform}}\ottprodnewline
\ottprodline{|}{ \forall  \ottnt{setIndex} \ottnt{formula} }{}{}{}{\ottcom{ForAll}}\ottprodnewline
\ottprodline{|}{ \forall  \ottnt{setIndex} \in \ottnt{sv} \ottnt{formula} }{}{}{}{\ottcom{ForAllIn}}\ottprodnewline
\ottprodline{|}{\ottnt{fv}  \ottsym{=}  \ottnt{fv_{{\mathrm{2}}}}}{}{}{}{\ottcom{fequal}}\ottprodnewline
\ottprodline{|}{ \ottnt{fv}  \neq  \ottnt{fv_{{\mathrm{2}}}} }{}{}{}{\ottcom{fnotequal}}\ottprodnewline
\ottprodline{|}{ \ottnt{fv}  \in  \ottnt{sv_{{\mathrm{2}}}} }{}{}{}{\ottcom{Contains}}\ottprodnewline
\ottprodline{|}{ \ottnt{fv}  \notin  \ottnt{sv_{{\mathrm{2}}}} }{}{}{}{\ottcom{NotContains}}\ottprodnewline
\ottprodline{|}{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}{}{}{}{\ottcom{Fresh}}\ottprodnewline
\ottprodline{|}{\ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}{}{}{}{\ottcom{Freshs}}\ottprodnewline
\ottprodline{|}{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}{}{}{}{\ottcom{FreshAddress}}\ottprodnewline
\ottprodline{|}{\ottsym{a1,}  \ottsym{..,}  \ottnt{a_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}{}{}{}{\ottcom{FreshAddresses}}\ottprodnewline
\ottprodline{|}{ \ottnt{sv_{{\mathrm{1}}}}  \subseteq  \ottnt{sv_{{\mathrm{2}}}} }{}{}{}{\ottcom{Subset}}}

\newcommand{\ottJop}{
\ottrulehead{\ottnt{Jop}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \langle  \ottnt{m} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m'} ,  \ottnt{s'} ,  \Theta'  \rangle }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma  \vdash (s, \Theta) } {\textsf{M}}{}{}{}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{Jop}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottmv{termvar}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{obj}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{arr}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{func}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\approx}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{vRef}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{assignTarget}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{m}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{vd}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{varDec}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{ret}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{op}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{numOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{numcmpOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{cmpOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{boolOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{preOp}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{preAssign}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{postAssign}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Theta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{b}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{T}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{C}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{const}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{maps}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{sv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{fv}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{setIndex}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottv\ottinterrule
\ottobj\ottinterrule
\ottarr\ottinterrule
\ottfunc\ottinterrule
\otte\ottinterrule
\ottAss\ottinterrule
\ottvRef\ottinterrule
\ottassignTarget\ottinterrule
\ottm\ottinterrule
\ottvd\ottinterrule
\ottvarDec\ottinterrule
\ottret\ottinterrule
\ottop\ottinterrule
\ottnumOp\ottinterrule
\ottnumcmpOp\ottinterrule
\ottcmpOp\ottinterrule
\ottboolOp\ottinterrule
\ottpreOp\ottinterrule
\ottpreAssign\ottinterrule
\ottpostAssign\ottinterrule
\otta\ottinterrule
\otts\ottinterrule
\otth\ottinterrule
\ottb\ottinterrule
\ottT\ottinterrule
\ottG\ottinterrule
\ottC\ottinterrule
\ottconst\ottinterrule
\ottterminals\ottinterrule
\ottmaps\ottinterrule
\ottsv\ottinterrule
\ottfv\ottinterrule
\ottn\ottinterrule
\ottsetIndex\ottinterrule
\ottformula\ottinterrule
\ottJop\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns Jop
%% defn reduce
\newcommand{\ottdruleFunc}[1]{\ottdrule[#1]{%
}{
 \langle  \ottnt{func} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![  \ottnt{func} ,  \ottnt{s}  ]\!]  ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{Func}}{}%
}}


\newcommand{\ottdruleObj}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{j}}}  \ottsym{:}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottmv{l}  \ottsym{:}  \ottnt{e}  \ottsym{,}  \ottmv{l'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l'_{\ottmv{j}}}  \ottsym{:}  \ottnt{e_{\ottmv{j}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{j}}}  \ottsym{:}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottmv{l}  \ottsym{:}  \ottnt{e'}  \ottsym{,}  \ottmv{l'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l'_{\ottmv{j}}}  \ottsym{:}  \ottnt{e_{\ottmv{j}}}  \ottsym{\}} ,  \ottnt{s'} ,  \Theta  \rangle }{%
{\ottdrulename{Obj}}{}%
}}


\newcommand{\ottdruleArr}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottnt{e}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{]} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottnt{e'}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{]} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Arr}}{}%
}}


\newcommand{\ottdruleDeref}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{id}  \in  \ottsym{dom(}  \ottnt{s}  \ottsym{)} }%
\ottpremise{ \ottnt{s}  \ottsym{(}  \ottmv{id}  \ottsym{)}  \in  \ottsym{dom(}  \Theta  \ottsym{)} }%
}{
 \langle  \ottmv{id} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \Theta  \ottsym{(}  \ottnt{s}  \ottsym{(}  \ottmv{id}  \ottsym{)}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{Deref}}{}%
}}


\newcommand{\ottdrulePropOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{e}  \ottsym{.}  \ottmv{l} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'}  \ottsym{.}  \ottmv{l} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Prop1}}{}%
}}


\newcommand{\ottdrulePropThree}[1]{\ottdrule[#1]{%
}{
 \langle  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{j}}}  \ottsym{:}  \ottnt{v_{\ottmv{j}}}  \ottsym{,}  \ottmv{l}  \ottsym{:}  \ottnt{v}  \ottsym{,}  \ottmv{l'_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v'_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l'_{\ottmv{j}}}  \ottsym{:}  \ottnt{v'_{\ottmv{j}}}  \ottsym{\}}  \ottsym{.}  \ottmv{l} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Prop3}}{}%
}}


\newcommand{\ottdruleArrGetOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{e}  \ottsym{[}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'}  \ottsym{[}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{]} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{ArrGet1}}{}%
}}


\newcommand{\ottdruleArrGetTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{vRef}  \ottsym{[}  \ottnt{e}  \ottsym{]} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{vRef}  \ottsym{[}  \ottnt{e'}  \ottsym{]} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{ArrGet2}}{}%
}}


\newcommand{\ottdruleArrGetThree}[1]{\ottdrule[#1]{%
}{
 \langle  \ottsym{[}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{j}}}  \ottsym{]}  \ottsym{[}  \ottmv{k}  \ottsym{]} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v_{\ottmv{k}}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{ArrGet3}}{}%
}}


\newcommand{\ottdruleVRef}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{\ottnt{v}  \ottsym{=}  \Theta  \ottsym{(}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \ottsym{)}}%
}{
 \langle  \ottnt{vRef} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{VRef}}{}%
}}


\newcommand{\ottdruleCallOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{e}  \neq  \ottnt{v}  \ottsym{.}  \ottmv{l} }%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{e}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Call1}}{}%
}}


\newcommand{\ottdruleCallTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{v}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{,}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{j}}}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{,}  \ottnt{e'_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{j}}}  \ottsym{)} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Call2}}{}%
}}


\newcommand{\ottdruleCallNamed}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{\ottnt{a_{{\mathrm{0}}}} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{\ottsym{a1,}  \ottsym{..,}  \ottnt{a_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{\ottnt{s'_{\ottmv{o}}}  \ottsym{=}   \ottnt{s'}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{a}  \ottsym{,}  \ottmv{this}  \ottsym{:}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{a_{\ottmv{i}}}  \ottsym{\}} }%
\ottpremise{\Theta_{\ottmv{o}}  \ottsym{=}   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}   [\![  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  ]\!]   \ottsym{,}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{:}  \ottkw{undefined}  \ottsym{,}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{a_{\ottmv{i}}}  \ottsym{:}  \ottnt{v_{\ottmv{i}}}  \ottsym{\}} }%
}{
 \langle   [\![  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  ]\!]   \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![ @body\{ \ottnt{m} \},  \ottnt{s'_{\ottmv{o}}} ,  \Theta_{\ottmv{o}}  ]\!]  ,  \ottnt{s} ,  \Theta_{\ottmv{o}}  \rangle }{%
{\ottdrulename{CallNamed}}{}%
}}


\newcommand{\ottdruleCallAnon}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a_{{\mathrm{0}}}} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{\ottsym{a1,}  \ottsym{..,}  \ottnt{a_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{\ottnt{s'_{\ottmv{o}}}  \ottsym{=}   \ottnt{s'}  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{a_{\ottmv{i}}}  \ottsym{\}} }%
\ottpremise{\Theta_{\ottmv{o}}  \ottsym{=}   \Theta  \oplus  \ottsym{\{}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{:}  \ottkw{undefined}  \ottsym{,}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{a_{\ottmv{i}}}  \ottsym{:}  \ottnt{v_{\ottmv{i}}}  \ottsym{\}} }%
}{
 \langle   [\![  \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  ]\!]   \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![ @body\{ \ottnt{m} \},  \ottnt{s'_{\ottmv{o}}} ,  \Theta_{\ottmv{o}}  ]\!]  ,  \ottnt{s} ,  \Theta_{\ottmv{o}}  \rangle }{%
{\ottdrulename{CallAnon}}{}%
}}


\newcommand{\ottdrulePropCallNamed}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{\ottnt{a_{{\mathrm{0}}}} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{\ottsym{a1,}  \ottsym{..,}  \ottnt{a_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{ \langle  \ottnt{v_{{\mathrm{0}}}}  \ottsym{.}  \ottmv{l} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  ]\!]  ,  \ottnt{s''} ,  \Theta'  \rangle }%
\ottpremise{\ottnt{s'_{\ottmv{o}}}  \ottsym{=}   \ottnt{s'}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{a}  \ottsym{,}  \ottmv{this}  \ottsym{:}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{a_{\ottmv{i}}}  \ottsym{\}} }%
\ottpremise{\Theta'_{\ottmv{o}}  \ottsym{=}   \Theta'  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}   [\![  \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  ]\!]   \ottsym{,}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{a_{\ottmv{i}}}  \ottsym{:}  \ottnt{v_{\ottmv{i}}}  \ottsym{\}} }%
}{
 \langle  \ottnt{v_{{\mathrm{0}}}}  \ottsym{.}  \ottmv{l}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![ @body\{ \ottnt{m} \},  \ottnt{s'_{\ottmv{o}}} ,  \Theta_{\ottmv{o}}  ]\!]  ,  \ottnt{s''} ,  \Theta'_{\ottmv{o}}  \rangle }{%
{\ottdrulename{PropCallNamed}}{}%
}}


\newcommand{\ottdrulePropCallAnon}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a_{{\mathrm{0}}}} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{\ottsym{a1,}  \ottsym{..,}  \ottnt{a_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{ \langle  \ottnt{v_{{\mathrm{0}}}}  \ottsym{.}  \ottmv{l} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![  \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s'}  ]\!]  ,  \ottnt{s''} ,  \Theta'  \rangle }%
\ottpremise{\ottnt{s'_{\ottmv{o}}}  \ottsym{=}   \ottnt{s'}  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{a_{\ottmv{i}}}  \ottsym{\}} }%
\ottpremise{\Theta'_{\ottmv{o}}  \ottsym{=}   \Theta  \oplus  \ottsym{\{}  \ottnt{a_{{\mathrm{0}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{a_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{a_{\ottmv{i}}}  \ottsym{:}  \ottnt{v_{\ottmv{i}}}  \ottsym{\}} }%
}{
 \langle  \ottnt{v_{{\mathrm{0}}}}  \ottsym{.}  \ottmv{l}  \ottsym{(}  \ottnt{v_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{v_{\ottmv{i}}}  \ottsym{)} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![ @body\{ \ottnt{m} \},  \ottnt{s'_{\ottmv{o}}} ,  \Theta'_{\ottmv{o}}  ]\!]  ,  \ottnt{s} ,  \Theta'_{\ottmv{o}}  \rangle }{%
{\ottdrulename{PropCallAnon}}{}%
}}


\newcommand{\ottdruleCallBodyOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{m}  \neq  \ottmv{return} \, \ottnt{v}  \ottsym{;}  \ottnt{m'} }%
\ottpremise{ \langle  \ottnt{m} ,  \ottnt{s'} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m'} ,  \ottnt{s''} ,  \Theta'  \rangle }%
}{
 \langle   [\![ @body\{ \ottnt{m} \},  \ottnt{s'} ,  \Theta  ]\!]  ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   [\![ @body\{ \ottnt{m'} \},  \ottnt{s''} ,  \Theta'  ]\!]  ,  \ottnt{s} ,  \Theta'  \rangle }{%
{\ottdrulename{CallBody1}}{}%
}}


\newcommand{\ottdruleCallBodyTwo}[1]{\ottdrule[#1]{%
}{
 \langle   [\![ @body\{ \ottnt{v} \},  \ottnt{s'} ,  \Theta  ]\!]  ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{undefined} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{CallBody2}}{}%
}}


\newcommand{\ottdruleCallBodyThree}[1]{\ottdrule[#1]{%
}{
 \langle   [\![ @body\{ \ottmv{return} \, \ottnt{v}  \ottsym{;}  \ottnt{m} \},  \ottnt{s'} ,  \Theta  ]\!]  ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{CallBody3}}{}%
}}


\newcommand{\ottdruleCallBodyFour}[1]{\ottdrule[#1]{%
}{
 \langle   [\![ @body\{ \ottmv{return}  \ottsym{;}  \ottnt{m} \},  \ottnt{s'} ,  \Theta  ]\!]  ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{undefined} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{CallBody4}}{}%
}}


\newcommand{\ottdruleSeqOne}[1]{\ottdrule[#1]{%
}{
 \langle  \ottnt{v}  \ottsym{;}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{Seq1}}{}%
}}


\newcommand{\ottdruleSeqTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{m_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m'_{{\mathrm{1}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m'_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{i}}} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Seq2}}{}%
}}


\newcommand{\ottdruleAssignOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{assignTarget}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{assignTarget} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{assignTarget} \, \approx \, \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'} \, \approx \, \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Assign1}}{}%
}}


\newcommand{\ottdruleAssignTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{vRef} \, \approx \, \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{vRef} \, \approx \, \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Assign2}}{}%
}}


\newcommand{\ottdruleAssignThree}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
}{
 \langle  \ottnt{vRef} \, \ottsym{=} \, \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s} ,   \Theta  \oplus  \ottsym{\{}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{Assign3}}{}%
}}


\newcommand{\ottdruleAssignTargetOne}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{assignTarget}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{assignTarget} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{assignTarget}  \ottsym{.}  \ottmv{l} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'}  \ottsym{.}  \ottmv{l} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{AssignTarget1}}{}%
}}


\newcommand{\ottdruleAssignTargetTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{assignTarget}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{assignTarget} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{assignTarget}  \ottsym{[}  \ottnt{e}  \ottsym{]} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'}  \ottsym{[}  \ottnt{e}  \ottsym{]} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{AssignTarget2}}{}%
}}


\newcommand{\ottdruleAssignTargetThree}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{vRef}  \ottsym{[}  \ottnt{e}  \ottsym{]} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{vRef}  \ottsym{[}  \ottnt{e'}  \ottsym{]} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{AssignTarget3}}{}%
}}


\newcommand{\ottdruleAssignUndef}[1]{\ottdrule[#1]{%
\ottpremise{ \ottmv{id}  \notin  \ottsym{dom(}  \ottnt{s}  \ottsym{)} }%
\ottpremise{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}%
}{
 \langle  \ottmv{id} \, \ottsym{=} \, \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,   \ottnt{s}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{a}  \ottsym{\}}  ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{AssignUndef}}{}%
}}


\newcommand{\ottdrulePropAdd}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{.}  \ottmv{l}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \notin  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{\ottnt{a}  \ottsym{=}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}}%
}{
 \langle  \ottnt{vRef}  \ottsym{.}  \ottmv{l} \, \ottsym{=} \, \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s} ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}   \Theta  \ottsym{(}  \ottnt{a}  \ottsym{)}  \cup  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \ottsym{\}}   \rangle }{%
{\ottdrulename{PropAdd}}{}%
}}


\newcommand{\ottdruleAssignNum}[1]{\ottdrule[#1]{%
}{
 \langle  \ottnt{vRef} \, \ottnt{numOp}  \ottsym{=} \, \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{vRef} \, \ottsym{=} \, \ottnt{vRef} \, \ottnt{numOp} \, \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{AssignNum}}{}%
}}


\newcommand{\ottdruleBinOpOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{e_{{\mathrm{1}}}} \, \ottnt{op} \, \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{1}}}} \, \ottnt{op} \, \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{BinOp1}}{}%
}}


\newcommand{\ottdruleBinOpTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'_{{\mathrm{2}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{v} \, \ottnt{op} \, \ottnt{e_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} \, \ottnt{op} \, \ottnt{e'_{{\mathrm{2}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{BinOp2}}{}%
}}


\newcommand{\ottdruleNumOp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{n_{{\mathrm{1}}}} \, \ottnt{numOp} \, \ottnt{n_{{\mathrm{2}}}}  \ottsym{=}  \ottnt{n}}%
}{
 \langle  \ottnt{n_{{\mathrm{1}}}} \, \ottnt{numOp} \, \ottnt{n_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{n} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{NumOp}}{}%
}}


\newcommand{\ottdruleBoolOp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{b_{{\mathrm{1}}}} \, \ottnt{boolOp} \, \ottnt{b_{{\mathrm{2}}}}  \ottsym{=}  \ottnt{b}}%
}{
 \langle  \ottnt{b_{{\mathrm{1}}}} \, \ottnt{boolOp} \, \ottnt{b_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{b} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{BoolOp}}{}%
}}


\newcommand{\ottdruleCmpOp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{v_{{\mathrm{1}}}} \, \ottnt{cmpOp} \, \ottnt{v_{{\mathrm{2}}}}  \ottsym{=}  \ottnt{b}}%
}{
 \langle  \ottnt{v_{{\mathrm{1}}}} \, \ottnt{cmpOp} \, \ottnt{v_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{b} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{CmpOp}}{}%
}}


\newcommand{\ottdruleNumCmpOp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{n_{{\mathrm{1}}}} \, \ottnt{numcmpOp} \, \ottnt{n_{{\mathrm{2}}}}  \ottsym{=}  \ottnt{b}}%
}{
 \langle  \ottnt{n_{{\mathrm{1}}}} \, \ottnt{numcmpOp} \, \ottnt{n_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{b} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{NumCmpOp}}{}%
}}


\newcommand{\ottdrulePreOp}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{preOp} \, \ottnt{e_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{preOp} \, \ottnt{e'_{{\mathrm{1}}}} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{PreOp}}{}%
}}


\newcommand{\ottdruleBoolNeg}[1]{\ottdrule[#1]{%
\ottpremise{ !\!  \, \ottnt{b_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{b_{{\mathrm{2}}}}}%
}{
 \langle   !\!  \, \ottnt{b_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{b_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{BoolNeg}}{}%
}}


\newcommand{\ottdruleNumNeg}[1]{\ottdrule[#1]{%
\ottpremise{ -\!  \, \ottnt{n_{{\mathrm{1}}}}  \ottsym{=}  \ottnt{n}}%
}{
 \langle   -\!  \, \ottnt{n_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{n} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{NumNeg}}{}%
}}


\newcommand{\ottdrulePreAssign}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{assignTarget}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{assignTarget} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{preAssign} \, \ottnt{assignTarget} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{preAssign} \, \ottnt{assignTarget'} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{PreAssign}}{}%
}}


\newcommand{\ottdrulePostAssign}[1]{\ottdrule[#1]{%
\ottpremise{ \ottnt{assignTarget}  \neq  \ottnt{vRef} }%
\ottpremise{ \langle  \ottnt{assignTarget} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottnt{assignTarget} \, \ottnt{postAssign} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{assignTarget'} \, \ottnt{postAssign} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{PostAssign}}{}%
}}


\newcommand{\ottdrulePostInc}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{\ottnt{a}  \ottsym{=}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}}%
\ottpremise{\Theta  \ottsym{(}  \ottnt{a}  \ottsym{)} \, \ottsym{+} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle  \ottnt{vRef} \,  \!\!+\!\!+  ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \Theta  \ottsym{(}  \ottnt{a}  \ottsym{)} ,  \ottnt{s} ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{PostInc}}{}%
}}


\newcommand{\ottdrulePreInc}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{\ottnt{a}  \ottsym{=}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}}%
\ottpremise{\Theta  \ottsym{(}  \ottnt{a}  \ottsym{)} \, \ottsym{+} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle   +\!\!+\!\!  \, \ottnt{vRef} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s} ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{PreInc}}{}%
}}


\newcommand{\ottdrulePostDec}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{\ottnt{a}  \ottsym{=}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}}%
\ottpremise{\Theta  \ottsym{(}  \ottnt{a}  \ottsym{)} \, \ottsym{-} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle  \ottnt{vRef} \,  \!\!\!-\!\!-  ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \Theta  \ottsym{(}  \ottnt{a}  \ottsym{)} ,  \ottnt{s} ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{PostDec}}{}%
}}


\newcommand{\ottdrulePreDec}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}  \in  \ottsym{dom(}  \ottkw{addr}  \ottsym{)} }%
\ottpremise{\ottnt{a}  \ottsym{=}  \ottkw{addr} \, \ottsym{(}  \ottnt{vRef}  \ottsym{,}  \ottnt{s}  \ottsym{,}  \Theta  \ottsym{)}}%
\ottpremise{\Theta  \ottsym{(}  \ottnt{a}  \ottsym{)} \, \ottsym{-} \, \ottsym{1}  \ottsym{=}  \ottnt{v}}%
}{
 \langle   -\!\!-\!\!  \, \ottnt{vRef} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{v} ,  \ottnt{s} ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{PreDec}}{}%
}}


\newcommand{\ottdruleVarOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}%
}{
 \langle  \ottkw{var} \, \ottmv{id} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   \epsilon  ,   \ottnt{s}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{a}  \ottsym{\}}  ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottkw{undefined}  \ottsym{\}}   \rangle }{%
{\ottdrulename{Var1}}{}%
}}


\newcommand{\ottdruleVarTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{e'} ,  \ottnt{s} ,  \Theta'  \rangle }{%
{\ottdrulename{Var2}}{}%
}}


\newcommand{\ottdruleVarThree}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}%
}{
 \langle  \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{v} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   \epsilon  ,   \ottnt{s}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{a}  \ottsym{\}}  ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}  \ottnt{v}  \ottsym{\}}   \rangle }{%
{\ottdrulename{Var3}}{}%
}}


\newcommand{\ottdruleVarFour}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{var} \, \ottnt{vd}  \ottsym{,}  \ottnt{vd'} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{var} \, \ottnt{vd}  \ottsym{;}  \ottkw{var} \, \ottnt{vd'} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{Var4}}{}%
}}


\newcommand{\ottdruleFuncDef}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{a} \, \ottkw{is} \, \ottkw{fresh}}%
}{
 \langle  \ottsym{@def} \, \ottkw{function} \, \ottmv{x}  \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{y_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle   \epsilon  ,   \ottnt{s}  \cup  \ottsym{\{}  \ottmv{x}  \ottsym{:}  \ottnt{a}  \ottsym{\}}  ,   \Theta  \oplus  \ottsym{\{}  \ottnt{a}  \ottsym{:}   [\![  \ottkw{function} \, \ottsym{(}  \ottmv{y_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{y_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}} ,  \ottnt{s}  ]\!]   \ottsym{\}}   \rangle }{%
{\ottdrulename{FuncDef}}{}%
}}


\newcommand{\ottdruleReturnOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottmv{return} \, \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottmv{return} \, \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{Return1}}{}%
}}


\newcommand{\ottdruleReturnTwo}[1]{\ottdrule[#1]{%
}{
 \langle  \ottmv{return} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottmv{return} \, \ottkw{undefined} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{Return2}}{}%
}}


\newcommand{\ottdruleIfOne}[1]{\ottdrule[#1]{%
\ottpremise{ \langle  \ottnt{e} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e'} ,  \ottnt{s'} ,  \Theta'  \rangle }%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e'}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s'} ,  \Theta'  \rangle }{%
{\ottdrulename{If1}}{}%
}}


\newcommand{\ottdruleIfTwo}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottkw{true}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m_{{\mathrm{1}}}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{If2}}{}%
}}


\newcommand{\ottdruleIfThree}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottkw{false}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m_{{\mathrm{2}}}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{If3}}{}%
}}


\newcommand{\ottdruleIfFour}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \,  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{If4}}{}%
}}


\newcommand{\ottdruleWhile}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{While}}{}%
}}


\newcommand{\ottdruleFor}[1]{\ottdrule[#1]{%
}{
 \langle  \ottkw{for} \, \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottkw{if} \, \ottsym{(}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{;}  \ottkw{while} \, \ottsym{(}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{\}}  \ottsym{\}} ,  \ottnt{s} ,  \Theta  \rangle }{%
{\ottdrulename{For}}{}%
}}

\newcommand{\ottdefnreduce}[1]{\begin{ottdefnblock}[#1]{$ \langle  \ottnt{m} ,  \ottnt{s} ,  \Theta  \rangle  \rightarrow  \langle  \ottnt{m'} ,  \ottnt{s'} ,  \Theta'  \rangle $}{}
\ottusedrule{\ottdruleFunc{}}
\ottusedrule{\ottdruleObj{}}
\ottusedrule{\ottdruleArr{}}
\ottusedrule{\ottdruleDeref{}}
\ottusedrule{\ottdrulePropOne{}}
\ottusedrule{\ottdrulePropThree{}}
\ottusedrule{\ottdruleArrGetOne{}}
\ottusedrule{\ottdruleArrGetTwo{}}
\ottusedrule{\ottdruleArrGetThree{}}
\ottusedrule{\ottdruleVRef{}}
\ottusedrule{\ottdruleCallOne{}}
\ottusedrule{\ottdruleCallTwo{}}
\ottusedrule{\ottdruleCallNamed{}}
\ottusedrule{\ottdruleCallAnon{}}
\ottusedrule{\ottdrulePropCallNamed{}}
\ottusedrule{\ottdrulePropCallAnon{}}
\ottusedrule{\ottdruleCallBodyOne{}}
\ottusedrule{\ottdruleCallBodyTwo{}}
\ottusedrule{\ottdruleCallBodyThree{}}
\ottusedrule{\ottdruleCallBodyFour{}}
\ottusedrule{\ottdruleSeqOne{}}
\ottusedrule{\ottdruleSeqTwo{}}
\ottusedrule{\ottdruleAssignOne{}}
\ottusedrule{\ottdruleAssignTwo{}}
\ottusedrule{\ottdruleAssignThree{}}
\ottusedrule{\ottdruleAssignTargetOne{}}
\ottusedrule{\ottdruleAssignTargetTwo{}}
\ottusedrule{\ottdruleAssignTargetThree{}}
\ottusedrule{\ottdruleAssignUndef{}}
\ottusedrule{\ottdrulePropAdd{}}
\ottusedrule{\ottdruleAssignNum{}}
\ottusedrule{\ottdruleBinOpOne{}}
\ottusedrule{\ottdruleBinOpTwo{}}
\ottusedrule{\ottdruleNumOp{}}
\ottusedrule{\ottdruleBoolOp{}}
\ottusedrule{\ottdruleCmpOp{}}
\ottusedrule{\ottdruleNumCmpOp{}}
\ottusedrule{\ottdrulePreOp{}}
\ottusedrule{\ottdruleBoolNeg{}}
\ottusedrule{\ottdruleNumNeg{}}
\ottusedrule{\ottdrulePreAssign{}}
\ottusedrule{\ottdrulePostAssign{}}
\ottusedrule{\ottdrulePostInc{}}
\ottusedrule{\ottdrulePreInc{}}
\ottusedrule{\ottdrulePostDec{}}
\ottusedrule{\ottdrulePreDec{}}
\ottusedrule{\ottdruleVarOne{}}
\ottusedrule{\ottdruleVarTwo{}}
\ottusedrule{\ottdruleVarThree{}}
\ottusedrule{\ottdruleVarFour{}}
\ottusedrule{\ottdruleFuncDef{}}
\ottusedrule{\ottdruleReturnOne{}}
\ottusedrule{\ottdruleReturnTwo{}}
\ottusedrule{\ottdruleIfOne{}}
\ottusedrule{\ottdruleIfTwo{}}
\ottusedrule{\ottdruleIfThree{}}
\ottusedrule{\ottdruleIfFour{}}
\ottusedrule{\ottdruleWhile{}}
\ottusedrule{\ottdruleFor{}}
\end{ottdefnblock}}

%% defn expType
\newcommand{\ottdruleVXXNum}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottnt{n}  :  \ottkw{number} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Num}}{}%
}}


\newcommand{\ottdruleVXXBool}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottnt{b}  :  \ottkw{boolean} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Bool}}{}%
}}


\newcommand{\ottdruleVXXString}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottkw{str}  :  \ottkw{string} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_String}}{}%
}}


\newcommand{\ottdruleVXXUndefined}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottkw{undefined}  :  \ottkw{undefined} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Undefined}}{}%
}}


\newcommand{\ottdruleVXXNull}[1]{\ottdrule[#1]{%
}{
 \Gamma   \vdash   \ottkw{null}  :  \ottkw{null} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Null}}{}%
}}


\newcommand{\ottdruleVXXObj}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T'_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \quad\hdots\quad   \Gamma_{{\ottmv{k}-1}}   \vdash   \ottnt{e_{\ottmv{k}}}  :  \ottnt{T'_{\ottmv{k}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma_{\ottmv{k}}  }%
\ottpremise{\ottnt{C}  \ottsym{=}     \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottnt{C_{\ottmv{i}}}    \cup    \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottsym{\{}  \ottnt{T_{\ottmv{i}}} \,  =  \, \ottnt{T'_{\ottmv{i}}}  \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{k}}}  \ottsym{:}  \ottnt{e_{\ottmv{k}}}  \ottsym{\}}  :  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{l_{\ottmv{k}}}  \ottsym{:}  \ottnt{T_{\ottmv{k}}}  \ottsym{\}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma_{\ottmv{k}} }{%
{\ottdrulename{V\_Obj}}{}%
}}


\newcommand{\ottdruleVXXArr}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{  \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \quad\hdots\quad   \Gamma_{{\ottmv{k}-1}}   \vdash   \ottnt{e_{\ottmv{k}}}  :  \ottnt{T_{\ottmv{k}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma_{\ottmv{k}}  }%
\ottpremise{\ottnt{C}  \ottsym{=}     \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottnt{C_{\ottmv{i}}}    \cup    \bigcup \limits_{ \ottmv{i} = \ottsym{1} }^ \ottmv{k}   \ottsym{\{}  \ottnt{T} \,  {\color{red}\succeq_c}  \, \ottnt{T'_{\ottmv{i}}}  \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{k}}}  \ottsym{]}  :  \ottsym{[}  \ottnt{T}  \ottsym{]} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma_{\ottmv{k}} }{%
{\ottdrulename{V\_Arr}}{}%
}}


\newcommand{\ottdruleVXXClosure}[1]{\ottdrule[#1]{%
\ottpremise{ \ottsym{dom(}  \gamma  \ottsym{)}  \subseteq  \ottsym{dom(}  \ottnt{s}  \ottsym{)} }%
\ottpremise{ \gamma   \vdash   \ottnt{func}  :   [\![  \ottnt{T} ,  \gamma , ]\!]  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \gamma' }%
}{
 \Gamma   \vdash    [\![  \ottnt{func} ,  \ottnt{s}  ]\!]   :   [\![  \ottnt{T} ,  \gamma , ]\!]  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{V\_Closure}}{}%
}}


\newcommand{\ottdruleAnonFun}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottmv{return}  \ottsym{:}  \ottkw{pending}  \ottsym{\}}    \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottnt{T_{\ottmv{k}}}}%
\ottpremise{ \ottnt{T_{\ottmv{k}}}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'_{\ottmv{k}}}  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :   [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T} ,  \Gamma , ]\!]  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T_{\ottmv{k}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{AnonFun}}{}%
}}


\newcommand{\ottdruleAnonVoid}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{  \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottmv{return}  \ottsym{:}  \ottkw{pending}  \ottsym{\}}    \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{pending}}%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :   [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T} ,  \Gamma , ]\!]  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottkw{undefined}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{AnonVoid}}{}%
}}


\newcommand{\ottdruleNamedFun}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{\Gamma_{\ottmv{o}}  \ottsym{=}   \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottmv{id}  \ottsym{:}   [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T} ,  \Gamma , ]\!]   \ottsym{,}  \ottmv{return}  \ottsym{:}  \ottkw{pending}  \ottsym{\}} }%
\ottpremise{ \Gamma_{\ottmv{o}}   \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottnt{T_{\ottmv{k}}}}%
\ottpremise{ \ottnt{T_{\ottmv{k}}}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'_{\ottmv{k}}}  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :   [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T} ,  \Gamma , ]\!]  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T_{\ottmv{k}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{NamedFun}}{}%
}}


\newcommand{\ottdruleNamedVoid}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T}  \ottsym{,}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{\Gamma_{\ottmv{o}}  \ottsym{=}   \Gamma  \cup  \ottsym{\{}  \ottmv{this}  \ottsym{:}  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{:}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{:}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottmv{id}  \ottsym{:}   [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T} ,  \Gamma , ]\!]   \ottsym{,}  \ottmv{return}  \ottsym{:}  \ottkw{pending}  \ottsym{\}} }%
\ottpremise{ \Gamma_{\ottmv{o}}   \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{IllDefined} \, \ottsym{(}  \ottkw{pending}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :   [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T} ,  \Gamma , ]\!]  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottkw{undefined}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{NamedVoid}}{}%
}}


\newcommand{\ottdruleIdType}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{(}  \ottmv{id}  \ottsym{)}  \ottsym{=}  \ottnt{T}}%
\ottpremise{ \ottnt{T}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'}  \ottsym{)} }%
}{
 \Gamma   \vdash   \ottmv{id}  :  \ottnt{T} \hspace{5pt}| _{  \varnothing  } \hspace{5pt}  \Gamma }{%
{\ottdrulename{IdType}}{}%
}}


\newcommand{\ottdrulePropType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l}  :  \ottnt{T} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{T}  \ottsym{\}} \,  \succeq  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }{%
{\ottdrulename{PropType}}{}%
}}


\newcommand{\ottdruleArrayType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]}  :  \ottnt{T} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottsym{[}  \ottnt{T}  \ottsym{]} \,  \succeq  \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{ArrayType}}{}%
}}


\newcommand{\ottdruleCallType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottnt{T_{\ottmv{k}}}  \ottsym{,}  \ottnt{T'_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{  \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T'_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \quad\hdots\quad   \Gamma_{{\ottmv{i}-1}}   \vdash   \ottnt{e_{\ottmv{i}}}  :  \ottnt{T'_{\ottmv{i}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{i}}}  } \hspace{5pt}  \Gamma_{\ottmv{i}}  }%
\ottpremise{\ottnt{C'}  \ottsym{=}     \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  =  \, \ottkw{undefined}  \ottsym{\}}  \cup    \bigcup \limits_{ \ottmv{j} = \ottsym{1} }^ \ottmv{i}   \ottsym{\{}  \ottnt{T_{\ottmv{j}}} \,  {\color{red}\succeq_c}  \, \ottnt{T'_{\ottmv{j}}}  \ottsym{\}}      \cup    \ottsym{\{}  \ottnt{T_{\ottmv{k}}} \,  {\color{red}\preceq_c}  \, \ottnt{T'_{\ottmv{k}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \,  [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T_{\ottmv{k}}} ,  \gamma , ]\!]   \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)}  :  \ottnt{T'_{\ottmv{k}}} \hspace{5pt}| _{     \bigcup \limits_{ \ottmv{j} = \ottsym{0} }^ \ottmv{i}   \ottnt{C_{\ottmv{j}}}    \cup  \ottnt{C'}   } \hspace{5pt}  \Gamma_{\ottmv{i}} }{%
{\ottdrulename{CallType}}{}%
}}


\newcommand{\ottdrulePropCallType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \ottsym{,}  \ottnt{T_{\ottmv{k}}}  \ottsym{,}  \ottnt{T'_{\ottmv{k}}} \, \ottkw{are} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T'_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C'}  } \hspace{5pt}  \Gamma' }%
\ottpremise{  \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T'_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \quad\hdots\quad   \Gamma_{{\ottmv{i}-1}}   \vdash   \ottnt{e_{\ottmv{i}}}  :  \ottnt{T'_{\ottmv{i}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{i}}}  } \hspace{5pt}  \Gamma_{\ottmv{i}}  }%
\ottpremise{\ottnt{C'}  \ottsym{=}     \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  {\color{red}\succeq_c}  \, \ottnt{T'_{{\mathrm{0}}}}  \ottsym{\}}  \cup    \bigcup \limits_{ \ottmv{j} = \ottsym{1} }^ \ottmv{i}   \ottsym{\{}  \ottnt{T_{\ottmv{j}}} \,  {\color{red}\succeq_c}  \, \ottnt{T'_{\ottmv{j}}}  \ottsym{\}}      \cup    \ottsym{\{}  \ottnt{T_{\ottmv{k}}} \,  {\color{red}\preceq_c}  \, \ottnt{T'_{\ottmv{k}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \,  [\![  \ottnt{T_{{\mathrm{0}}}}  \ottsym{,}  \ottnt{T_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{T_{\ottmv{i}}}  \rightarrow  \ottnt{T_{\ottmv{k}}} ,  \gamma , ]\!]   \ottsym{\}}   }%
}{
 \Gamma   \vdash   \ottnt{e}  \ottsym{.}  \ottmv{l}  \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottnt{e_{\ottmv{i}}}  \ottsym{)}  :  \ottnt{T'_{\ottmv{k}}} \hspace{5pt}| _{     \bigcup \limits_{ \ottmv{j} = \ottsym{0} }^ \ottmv{i}   \ottnt{C_{\ottmv{j}}}    \cup  \ottnt{C'}   } \hspace{5pt}  \Gamma_{\ottmv{i}} }{%
{\ottdrulename{PropCallType}}{}%
}}


\newcommand{\ottdruleFunBodyType}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{  \gamma  \cup  \ottsym{\{}  \ottmv{return}  \ottsym{:}  \ottkw{pending}  \ottsym{\}}    \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \gamma' }%
\ottpremise{ \gamma  \vdash (s, \Theta) }%
\ottpremise{\gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{pending}}%
}{
 \Gamma   \vdash    [\![ @body\{ \ottnt{m} \},  \ottnt{s} ,  \Theta  ]\!]   :  \ottnt{T} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottkw{undefined}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{FunBodyType}}{}%
}}


\newcommand{\ottdruleVoidBodyType}[1]{\ottdrule[#1]{%
\ottpremise{  \gamma  \cup  \ottsym{\{}  \ottmv{return}  \ottsym{:}  \ottkw{pending}  \ottsym{\}}    \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \gamma' }%
\ottpremise{ \gamma  \vdash (s, \Theta) }%
\ottpremise{\gamma'  \ottsym{["return"]}  \ottsym{=}  \ottnt{T_{\ottmv{k}}}}%
\ottpremise{ \ottnt{T_{\ottmv{k}}}  \neq  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'_{\ottmv{k}}}  \ottsym{)} }%
}{
 \Gamma   \vdash    [\![ @body\{ \ottnt{m} \},  \ottnt{s} ,  \Theta  ]\!]   :  \ottnt{T} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T_{\ottmv{k}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma }{%
{\ottdrulename{VoidBodyType}}{}%
}}


\newcommand{\ottdruleAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{assignTarget}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{assignTarget} \, \ottsym{=} \, \ottnt{e}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{   \ottnt{C_{{\mathrm{1}}}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  {\color{red}\succeq_c}  \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{AssignType}}{}%
}}


\newcommand{\ottdruleAssignTypeUndef}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \ottmv{id}  \notin  \ottsym{dom(}  \Gamma  \ottsym{)} }%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
}{
 \Gamma   \vdash   \ottmv{id} \, \ottsym{=} \, \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{   \ottnt{C_{{\mathrm{1}}}}  \cup  \ottsym{\{}  \ottnt{T} \,  {\color{red}\succeq_c}  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}   } \hspace{5pt}   \Gamma_{{\mathrm{2}}}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{AssignTypeUndef}}{}%
}}


\newcommand{\ottdrulePropAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottmv{id}  :  \ottnt{T_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma }%
\ottpremise{ \Gamma   \vdash   \ottmv{id}  \ottsym{.}  \ottmv{l_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma }%
\ottpremise{ \Gamma   \vdash   \ottmv{id}  \ottsym{.}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{.}  \ottmv{l_{\ottmv{k}}}  :  \ottnt{T_{\ottmv{k}}} \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma }%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T'} \hspace{5pt}| _{  \ottnt{C'}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{\Gamma'  \ottsym{=}   \Gamma_{{\mathrm{1}}}  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottsym{\{}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{:}  \ottsym{\{}  \ottmv{l_{\ottmv{k}}}  \ottsym{:}  \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{T'}  \ottsym{\}}  \multimapinv  \ottnt{T_{\ottmv{k}}}  \ottsym{\}}  \multimapinv  \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  \multimapinv  \ottnt{T_{{\mathrm{0}}}}  \ottsym{\}} }%
\ottpremise{\ottnt{C}  \ottsym{=}  \ottsym{\{}  \ottnt{T_{\ottmv{k}}} \,  \succeq_o  \, \ottsym{\{}  \ottmv{l}  \ottsym{:}  \ottnt{T'}  \ottsym{\}}  \ottsym{\}}}%
}{
 \Gamma   \vdash   \ottmv{id}  \ottsym{.}  \ottmv{l_{{\mathrm{1}}}}  \ottsym{.}  \ottmv{l_{\ottmv{k}}}  \ottsym{.}  \ottmv{l} \, \ottsym{=} \, \ottnt{e}  :  \ottnt{T'} \hspace{5pt}| _{     \bigcup \limits_{ \ottmv{j} = \ottsym{0} }^ \ottmv{i}   \ottnt{C_{\ottmv{j}}}    \cup    \ottnt{C'}  \cup  \ottnt{C}     } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{PropAssignType}}{}%
}}


\newcommand{\ottdruleNumAssignType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{assignTarget}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{assignTarget} \, \ottnt{numOp}  \ottsym{=} \, \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottnt{T_{{\mathrm{1}}}}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{NumAssignType}}{}%
}}


\newcommand{\ottdruleNumOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{numOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{number} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{NumOpType}}{}%
}}


\newcommand{\ottdruleBoolOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{boolOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{boolean} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{BoolOpType}}{}%
}}


\newcommand{\ottdruleCmpOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{cmpOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{boolean} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottnt{T_{{\mathrm{2}}}}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{CmpOpType}}{}%
}}


\newcommand{\ottdruleNumCmpOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
}{
 \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}} \, \ottnt{numcmpOp} \, \ottnt{e_{{\mathrm{2}}}}  :  \ottkw{boolean} \hspace{5pt}| _{     \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}    \cup    \ottsym{\{}  \ottnt{T_{{\mathrm{2}}}} \,  =  \, \ottkw{number}  \ottsym{\}}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{NumCmpOpType}}{}%
}}


\newcommand{\ottdruleNegBoolType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash    !\!  \, \ottnt{e}  :  \ottkw{boolean} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{NegBoolType}}{}%
}}


\newcommand{\ottdruleNegNumType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash    -\!  \, \ottnt{e}  :  \ottkw{number} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{NegNumType}}{}%
}}


\newcommand{\ottdrulePreOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{assignTarget}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottnt{preAssign} \, \ottnt{assignTarget}  :  \ottkw{number} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{PreOpType}}{}%
}}


\newcommand{\ottdrulePostOpType}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{assignTarget}  :  \ottnt{T_{{\mathrm{1}}}} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottnt{assignTarget} \, \ottnt{postAssign}  :  \ottkw{number} \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{1}}}} \,  =  \, \ottkw{number}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{PostOpType}}{}%
}}

\newcommand{\ottdefnexpType}[1]{\begin{ottdefnblock}[#1]{$ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' $}{}
\ottusedrule{\ottdruleVXXNum{}}
\ottusedrule{\ottdruleVXXBool{}}
\ottusedrule{\ottdruleVXXString{}}
\ottusedrule{\ottdruleVXXUndefined{}}
\ottusedrule{\ottdruleVXXNull{}}
\ottusedrule{\ottdruleVXXObj{}}
\ottusedrule{\ottdruleVXXArr{}}
\ottusedrule{\ottdruleVXXClosure{}}
\ottusedrule{\ottdruleAnonFun{}}
\ottusedrule{\ottdruleAnonVoid{}}
\ottusedrule{\ottdruleNamedFun{}}
\ottusedrule{\ottdruleNamedVoid{}}
\ottusedrule{\ottdruleIdType{}}
\ottusedrule{\ottdrulePropType{}}
\ottusedrule{\ottdruleArrayType{}}
\ottusedrule{\ottdruleCallType{}}
\ottusedrule{\ottdrulePropCallType{}}
\ottusedrule{\ottdruleFunBodyType{}}
\ottusedrule{\ottdruleVoidBodyType{}}
\ottusedrule{\ottdruleAssignType{}}
\ottusedrule{\ottdruleAssignTypeUndef{}}
\ottusedrule{\ottdrulePropAssignType{}}
\ottusedrule{\ottdruleNumAssignType{}}
\ottusedrule{\ottdruleNumOpType{}}
\ottusedrule{\ottdruleBoolOpType{}}
\ottusedrule{\ottdruleCmpOpType{}}
\ottusedrule{\ottdruleNumCmpOpType{}}
\ottusedrule{\ottdruleNegBoolType{}}
\ottusedrule{\ottdruleNegNumType{}}
\ottusedrule{\ottdrulePreOpType{}}
\ottusedrule{\ottdrulePostOpType{}}
\end{ottdefnblock}}

%% defn typable
\newcommand{\ottdruleExpTypable}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottnt{e}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{ExpTypable}}{}%
}}


\newcommand{\ottdruleFuncDefTypable}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottsym{@def} \, \ottkw{function} \, \ottmv{id}  \ottsym{(}  \ottmv{x_{{\mathrm{1}}}}  \ottsym{,} \, .. \, \ottsym{,}  \ottmv{x_{\ottmv{i}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, .. \, \ottsym{;}  \ottnt{m_{\ottmv{j}}}  \ottsym{\}}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{FuncDefTypable}}{}%
}}


\newcommand{\ottdruleRetTypableOne}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottmv{return} \, \ottkw{undefined}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottmv{return}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{RetTypable1}}{}%
}}


\newcommand{\ottdruleRetTypableTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{pending}}%
}{
 \Gamma   \vdash   \ottmv{return} \, \ottnt{e}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{return}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{RetTypable2}}{}%
}}


\newcommand{\ottdruleRetTypableThree}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T'}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottmv{return} \, \ottnt{e}  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T'}  \ottsym{\}}   } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{return}  \ottsym{:}  \ottnt{T}  \ottsym{\}}  }{%
{\ottdrulename{RetTypable3}}{}%
}}


\newcommand{\ottdruleRetTypableFour}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
\ottpremise{\Gamma'  \ottsym{["return"]}  \ottsym{=}  \ottnt{T'}}%
}{
 \Gamma   \vdash   \ottmv{return} \, \ottnt{e}  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T} \,  =  \, \ottnt{T'}  \ottsym{\}}   } \hspace{5pt}  \Gamma' }{%
{\ottdrulename{RetTypable4}}{}%
}}


\newcommand{\ottdruleSeqTypable}[1]{\ottdrule[#1]{%
\ottpremise{  \Gamma   \vdash   \ottnt{m_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \quad\hdots\quad   \Gamma_{{\ottmv{i}-1}}   \vdash   \ottnt{m_{\ottmv{i}}}  \hspace{5pt}| _{  \ottnt{C_{\ottmv{i}}}  } \hspace{5pt}  \Gamma_{\ottmv{i}}  }%
}{
 \Gamma   \vdash   \ottnt{m_{{\mathrm{1}}}}  \ottsym{;} \, ... \, \ottsym{;}  \ottnt{m_{\ottmv{i}}}  \hspace{5pt}| _{   \bigcup \limits_{ \ottmv{i} = \ottsym{0} }^ \ottmv{k}   \ottnt{C_{\ottmv{i}}}   } \hspace{5pt}  \Gamma_{\ottmv{i}} }{%
{\ottdrulename{SeqTypable}}{}%
}}


\newcommand{\ottdruleIfTypableOne}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{ \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{m_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{m_{{\mathrm{2}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
\ottpremise{\Gamma_{{\mathrm{3}}}  \ottsym{=}  \ottsym{merge(}  \Gamma_{{\mathrm{0}}}  \ottsym{,}  \Gamma_{{\mathrm{1}}}  \ottsym{,}  \Gamma_{{\mathrm{2}}}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m_{{\mathrm{1}}}}  \ottsym{\}} \, \ottkw{else} \, \ottsym{\{}  \ottnt{m_{{\mathrm{2}}}}  \ottsym{\}}  \hspace{5pt}| _{     \ottnt{C_{{\mathrm{0}}}}  \cup    \ottnt{C_{{\mathrm{1}}}}  \cup  \ottnt{C_{{\mathrm{2}}}}      \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }{%
{\ottdrulename{IfTypable1}}{}%
}}


\newcommand{\ottdruleIfTypableTwo}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{\Gamma_{{\mathrm{2}}}  \ottsym{=}  \ottsym{merge(}  \Gamma_{{\mathrm{0}}}  \ottsym{,}  \Gamma_{{\mathrm{1}}}  \ottsym{,}  \Gamma_{{\mathrm{0}}}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{if} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \hspace{5pt}| _{     \ottnt{C_{{\mathrm{0}}}}  \cup  \ottnt{C_{{\mathrm{1}}}}    \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{IfTypable2}}{}%
}}


\newcommand{\ottdruleWhileTypable}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T_{{\mathrm{0}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{ \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{\Gamma_{{\mathrm{2}}}  \ottsym{=}  \ottsym{merge(}  \Gamma_{{\mathrm{0}}}  \ottsym{,}  \Gamma_{{\mathrm{1}}}  \ottsym{,}  \Gamma_{{\mathrm{0}}}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{while} \, \ottsym{(}  \ottnt{e}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \hspace{5pt}| _{     \ottnt{C_{{\mathrm{0}}}}  \cup  \ottnt{C_{{\mathrm{1}}}}    \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}   } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{WhileTypable}}{}%
}}


\newcommand{\ottdruleForTypable}[1]{\ottdrule[#1]{%
\ottpremise{ \Gamma   \vdash   \ottnt{e_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{0}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{0}}} }%
\ottpremise{ \Gamma_{{\mathrm{0}}}   \vdash   \ottnt{e_{{\mathrm{2}}}}  :  \ottnt{T_{{\mathrm{2}}}} \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}} }%
\ottpremise{ \Gamma_{{\mathrm{1}}}   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{2}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }%
\ottpremise{ \Gamma_{{\mathrm{2}}}   \vdash   \ottnt{e_{{\mathrm{3}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{3}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{3}}} }%
\ottpremise{\Gamma_{{\mathrm{4}}}  \ottsym{=}  \ottsym{merge(}  \Gamma_{{\mathrm{1}}}  \ottsym{,}  \Gamma_{{\mathrm{3}}}  \ottsym{,}  \Gamma_{{\mathrm{1}}}  \ottsym{)}}%
}{
 \Gamma   \vdash   \ottkw{for} \, \ottsym{(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{3}}}}  \ottsym{)}  \ottsym{\{}  \ottnt{m}  \ottsym{\}}  \hspace{5pt}| _{     \ottnt{C_{{\mathrm{0}}}}  \cup  \ottnt{C_{{\mathrm{1}}}}    \cup      \ottnt{C_{{\mathrm{2}}}}  \cup  \ottnt{C_{{\mathrm{3}}}}    \cup  \ottsym{\{}  \ottnt{T_{{\mathrm{0}}}} \,  =  \, \ottkw{boolean}  \ottsym{\}}     } \hspace{5pt}  \Gamma_{{\mathrm{4}}} }{%
{\ottdrulename{ForTypable}}{}%
}}


\newcommand{\ottdruleDecTypable}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T} \, \ottkw{is} \, \ottkw{fresh}}%
}{
 \Gamma   \vdash   \ottkw{var} \, \ottmv{id}  \hspace{5pt}| _{  \varnothing  } \hspace{5pt}   \Gamma  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottkw{IllDefined} \, \ottsym{(}  \ottnt{T}  \ottsym{)}  \ottsym{\}}  }{%
{\ottdrulename{DecTypable}}{}%
}}


\newcommand{\ottdruleDefTypable}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{T'} \, \ottkw{is} \, \ottkw{fresh}}%
\ottpremise{ \Gamma   \vdash   \ottnt{e}  :  \ottnt{T} \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' }%
}{
 \Gamma   \vdash   \ottkw{var} \, \ottmv{id}  \ottsym{=}  \ottnt{e}  \hspace{5pt}| _{   \ottnt{C}  \cup  \ottsym{\{}  \ottnt{T'} \,  {\color{red}\preceq_c}  \, \ottnt{T}  \ottsym{\}}   } \hspace{5pt}   \Gamma'  \cup  \ottsym{\{}  \ottmv{id}  \ottsym{:}  \ottnt{T'}  \ottsym{\}}  }{%
{\ottdrulename{DefTypable}}{}%
}}


\newcommand{\ottdruleMultiDecTypable}[1]{\ottdrule[#1]{%
\ottpremise{  \Gamma   \vdash   \ottkw{var} \, \ottnt{vd_{{\mathrm{1}}}}  \hspace{5pt}| _{  \ottnt{C_{{\mathrm{1}}}}  } \hspace{5pt}  \Gamma_{{\mathrm{1}}}   \quad\hdots\quad   \Gamma_{{\ottmv{k}-1}}   \vdash   \ottkw{var} \, \ottnt{vd_{\ottmv{k}}}  \hspace{5pt}| _{  \ottnt{C_{\ottmv{k}}}  } \hspace{5pt}  \Gamma_{\ottmv{k}}  }%
}{
 \Gamma   \vdash   \ottkw{var} \, \ottnt{vd_{{\mathrm{1}}}}  \ottsym{,} \, ... \, \ottsym{,}  \ottnt{vd_{\ottmv{k}}}  \hspace{5pt}| _{    \bigcup \limits_{ \ottmv{i} = \ottmv{i} }^ \ottmv{k}   \ottnt{C_{\ottmv{k}}}    } \hspace{5pt}  \Gamma_{{\mathrm{2}}} }{%
{\ottdrulename{MultiDecTypable}}{}%
}}

\newcommand{\ottdefntypable}[1]{\begin{ottdefnblock}[#1]{$ \Gamma   \vdash   \ottnt{m}  \hspace{5pt}| _{  \ottnt{C}  } \hspace{5pt}  \Gamma' $}{}
\ottusedrule{\ottdruleExpTypable{}}
\ottusedrule{\ottdruleFuncDefTypable{}}
\ottusedrule{\ottdruleRetTypableOne{}}
\ottusedrule{\ottdruleRetTypableTwo{}}
\ottusedrule{\ottdruleRetTypableThree{}}
\ottusedrule{\ottdruleRetTypableFour{}}
\ottusedrule{\ottdruleSeqTypable{}}
\ottusedrule{\ottdruleIfTypableOne{}}
\ottusedrule{\ottdruleIfTypableTwo{}}
\ottusedrule{\ottdruleWhileTypable{}}
\ottusedrule{\ottdruleForTypable{}}
\ottusedrule{\ottdruleDecTypable{}}
\ottusedrule{\ottdruleDefTypable{}}
\ottusedrule{\ottdruleMultiDecTypable{}}
\end{ottdefnblock}}

%% defn store

\newcommand{\ottdefnstore}[1]{\begin{ottdefnblock}[#1]{$ \Gamma  \vdash (s, \Theta) $}{}
\end{ottdefnblock}}


\newcommand{\ottdefnsJop}{
\ottdefnreduce{}\ottdefnexpType{}\ottdefntypable{}\ottdefnstore{}}

\newcommand{\ottdefnss}{
\ottdefnsJop
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

\begin{document}
\ottall

\begin{verbatim}
Definition rules:        104 good    0 bad
Definition rule clauses: 288 good    0 bad
\end{verbatim}
\end{document}
